# =============================================================================
# 0379.email 项目环境变量配置示例
# =============================================================================
# 复制此文件为对应环境的配置文件，并填入实际值
# 可用环境: development, staging, production

# =============================================================================
# 应用基础配置
# =============================================================================
NODE_ENV=development
APP_NAME=0379.email
APP_VERSION=1.0.0
APP_DEBUG=true
APP_LOG_LEVEL=info

# 服务端口配置
API_PORT=3000
ADMIN_PORT=3001
LLM_PORT=3002
MAIL_PORT=3003
WIKI_PORT=3004

# =============================================================================
# 数据库配置
# =============================================================================

# Redis 配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_CLUSTER_NODES=
REDIS_SENTINEL_HOSTS=

# MongoDB 配置
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_DATABASE=emaildb
MONGODB_USERNAME=
MONGODB_PASSWORD=
MONGODB_AUTH_SOURCE=admin

# PostgreSQL 配置
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DATABASE=emaildb
POSTGRES_USERNAME=emailuser
POSTGRES_PASSWORD=
POSTGRES_SSL_MODE=disable

# =============================================================================
# 认证和安全配置
# =============================================================================

# JWT 配置
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# 密码加密
BCRYPT_ROUNDS=12
PEPPER_SECRET=your-pepper-secret-change-this

# API 安全
API_KEY=your-api-key-change-this-in-production
API_VERSION=v1
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX=100

# 会话配置
SESSION_SECRET=your-session-secret-change-this
SESSION_NAME=0379_session
SESSION_SECURE=false
SESSION_MAX_AGE=86400000

# =============================================================================
# 邮件服务配置
# =============================================================================

# SMTP 配置
SMTP_HOST=smtp.0379.email
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@0379.email
SMTP_PASSWORD=your-smtp-password
SMTP_FROM_NAME=0379.email
SMTP_FROM_EMAIL=noreply@0379.email

# 邮件队列配置
MAIL_QUEUE_REDIS_HOST=localhost
MAIL_QUEUE_REDIS_PORT=6379
MAIL_QUEUE_REDIS_DB=1

# =============================================================================
# AI/LLM 服务配置
# =============================================================================

# OpenAI 配置
OPENAI_API_KEY=your-openai-api-key
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=1000
OPENAI_TEMPERATURE=0.7

# 本地 LLM 配置
LOCAL_LLM_ENABLED=false
LOCAL_LLM_HOST=localhost
LOCAL_LLM_PORT=11434
LOCAL_LLM_MODEL=llama2

# AI 服务配置
AI_SERVICE_ENABLED=true
AI_SERVICE_TIMEOUT=30000
AI_SERVICE_MAX_CONCURRENT=10

# =============================================================================
# 文件存储配置
# =============================================================================

# 本地存储
UPLOAD_PATH=/var/www/uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx

# 云存储 (可选)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=0379-email-storage

# =============================================================================
# 监控和日志配置
# =============================================================================

# 日志配置
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/0379-email
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# 监控配置
METRICS_ENABLED=true
METRICS_PORT=9464
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

# Sentry 错误监控
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# Prometheus 指标
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# =============================================================================
# 缓存配置
# =============================================================================

# Redis 缓存
CACHE_TTL=3600
CACHE_PREFIX=0379email:

# 内存缓存
MEMORY_CACHE_MAX_SIZE=100
MEMORY_CACHE_TTL=300

# =============================================================================
# 安全配置
# =============================================================================

# CORS 配置
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization

# 安全头配置
HELMET_ENABLED=true
FRAMEGUARD_ACTION=sameorigin
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true

# 限流配置
RATE_LIMIT_LOGIN_ATTEMPTS=5
RATE_LIMIT_LOGIN_WINDOW=900000
RATE_LIMIT_API_REQUESTS=100
RATE_LIMIT_API_WINDOW=60000

# =============================================================================
# 外部服务配置
# =============================================================================

# 第三方认证
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# 支付服务 (可选)
STRIPE_PUBLIC_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# 分析服务 (可选)
GOOGLE_ANALYTICS_ID=
MIXPANEL_TOKEN=

# =============================================================================
# 开发和测试配置
# =============================================================================

# 开发配置
DEV_MOCK_EXTERNAL_APIS=false
DEV_SEED_DATA=true
DEV_AUTO_RELOAD=true

# 测试配置
TEST_DATABASE_URL=mongodb://localhost:27017/emaildb_test
TEST_REDIS_URL=redis://localhost:6379/15
TEST_JWT_SECRET=test-jwt-secret

# =============================================================================
# 部署配置
# =============================================================================

# Docker 配置
DOCKER_REGISTRY=
DOCKER_IMAGE_TAG=latest
DOCKER_BUILD_ARGS=

# Kubernetes 配置
KUBERNETES_NAMESPACE=0379-email
KUBERNETES_CONFIG_PATH=

# CI/CD 配置
CI_BUILD_NUMBER=
CI_COMMIT_SHA=
CI_BRANCH=

# =============================================================================
# 备份和恢复配置
# =============================================================================

# 备份配置
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/backups

# 数据库备份
DB_BACKUP_ENABLED=true
DB_BACKUP_SCHEDULE=0 3 * * *
DB_BACKUP_PATH=/backups/database

# =============================================================================
# 特定环境配置
# =============================================================================

# 开发环境特定配置
DEV_DATABASE_URL=mongodb://localhost:27017/emaildb_dev
DEV_REDIS_URL=redis://localhost:6379/0
DEV_LOG_LEVEL=debug

# 生产环境特定配置
PROD_DATABASE_URL=
PROD_REDIS_URL=
PROD_LOG_LEVEL=warn
PROD_SESSION_SECURE=true

# 测试环境特定配置
TEST_DATABASE_URL=mongodb://localhost:27017/emaildb_test
TEST_REDIS_URL=redis://localhost:6379/1
TEST_LOG_LEVEL=error

# =============================================================================
# 其他配置
# =============================================================================

# 时区配置
TIMEZONE=Asia/Shanghai

# 国际化配置
DEFAULT_LANGUAGE=zh-CN
SUPPORTED_LANGUAGES=zh-CN,en-US

# 功能开关
FEATURE_MAINTENANCE_MODE=false
FEATURE_BETA_FEATURES=true
FEATURE_ANALYTICS=false