# 0379.world 集成中心服务器

**集成中心服务器**，本质上是一个「展示型门户」：它只负责把备案域名的访问请求中转到各个 Vercel 项目，不承担高并发计算，也不做复杂业务逻辑。换句话说，它更像是一个 **同步克隆版的展示服务器**。  

---

## ✅ 对服务器的要求（低并发展示场景）

### 1. **硬件配置**

- **CPU**：双核即可（如 2 vCPU），主要用于处理 Nginx/Apache 的反向代理。
- **内存**：2GB–4GB 足够，主要用于维持代理进程和缓存。
- **磁盘**：20GB–40GB，主要存放配置文件和日志，不需要大容量。
- **带宽**：1–5Mbps 就能满足展示需求，如果要保证流畅访问，建议 ≥10Mbps。

### 2. **软件环境**

- **操作系统**：Linux（Ubuntu/CentOS/Alibaba Cloud Linux）
- **Web服务**：Nginx（推荐）或 Apache，用于反向代理和重定向。
- **安全配置**：开启防火墙，限制只开放 80/443 端口。

### 3. **网络与备案**

- 主域名和子域名必须解析到该服务器公网 IP（如 `8.152.195.33`）。
- 备案信息与解析保持一致，避免警告。

---

## 🧩 举例：展示 24 个项目的配置

假设你有 24 个子项目，每个子域名对应一个 Vercel 部署：

```nginx
# 示例：24个子项目代理配置
server {
    listen 80;
    server_name project1.0379.world;
    location / {
        proxy_pass https://project1.vercel.app;
    }
}

server {
    listen 80;
    server_name project2.0379.world;
    location / {
        proxy_pass https://project2.vercel.app;
    }
}

# ……依次类推，直到 project24
server {
    listen 80;
    server_name project24.0379.world;
    location / {
        proxy_pass https://project24.vercel.app;
    }
}
```

---

## 🖥️ 主域名仪表盘（0379.world）

- 主域名 `0379.world` 部署一个门户站点，作为 **集成中心**。
- 首页展示 24 个项目入口（导航卡片/列表）。
- 点击入口后跳转到对应子域名（如 `project1.0379.world` → Vercel 项目）。

---

## ✨ 总结

- **服务器要求很低**：只需稳定、备案合规，配置轻量即可。  
- **核心作用**：作为中转和展示，不做高并发计算。  
- **实现方式**：主域名门户 + 子域名代理，24 个项目都能通过同一服务器汇集展示。  

---

**24 项目门户首页的 Next.js 导航代码模板**
可以直接在 `0379.world` 上展示所有入口。

### 仪表盘项目概览

此项目是一个企业级 AI 智能管理平台（Next.js 16 + React 19 + TypeScript + Tailwind），内置数据分析、权限管理、通知中心、移动端适配等模块，适合作为“集成中心服务器”的门户与汇集入口。示例运行页面展示了“YYC³ AI 智能外呼系统”的看板、搜索与通知逻辑，证明该仪表盘能承载应用列表与状态概览。

---

### 作为集成中心的推荐架构

- **主域名门户**：将 0379.world 指向你的阿里云服务器，部署该仪表盘项目作为统一入口与导航。
- **子域名代理**：为 24 个项目配置子域名，并在阿里云服务器用 Nginx 反向代理到各自的 Vercel 项目 URL（或已有自定义域）。
- **应用清单页面**：在仪表盘主页或专用路由中，以网格卡片展示 24 个项目的名称、简介、状态和入口链接；支持移动端组件实现良好适配。

---

### 仪表盘项目的快速接入步骤

1. **拉取与安装**
   - 克隆仓库并安装依赖，使用 pnpm/yarn/npm 均可；本项目提供了开发与构建命令说明。
2. **环境变量配置**
   - 在 .env.local 中设置你需要的后端地址或静态清单；仓库提供 .env.example 作为参考。
3. **页面与路由**
   - 在 app/ 下创建“应用汇总”页面（如 app/apps/page.tsx），并使用 components 与 hooks 组合展示清单和状态。
4. **权限与可见性（可选）**
   - 若需按角色显示项目入口，使用 auth 模块的 PermissionGate 进行条件渲染。
5. **部署到阿里云服务器**
   - 使用 Node 运行或容器化；前面以 Nginx 做反向代理，暴露 80/443。

以上步骤与目录结构、技术栈、组件库均与仓库文档一致。

---

### 示例：应用汇总页（Next.js）

```tsx
// app/apps/page.tsx
import Link from "next/link";

const projects = [
  { name: "YYC³ AI 智能外呼", url: "https://yyc3.vercel.app", desc: "AI驱动的外呼与审阅闭环" },
  { name: "星云操作系统", url: "https://xy.yanyu.red", desc: "多租户与权限管理" },
  // ...继续补充到 24 项
];

export default function AppsPage() {
  return (
    <main className="p-8 space-y-6">
      <h1 className="text-2xl font-bold">应用汇总（24 项）</h1>
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        {projects.map(p => (
          <div key={p.name} className="border rounded p-4">
            <h2 className="text-lg font-semibold">{p.name}</h2>
            <p className="text-sm text-muted-foreground">{p.desc}</p>
            <Link className="text-primary mt-2 inline-block" href={p.url} target="_blank">进入应用 →</Link>
          </div>
        ))}
      </div>
    </main>
  );
}
```

- 可根据仓库中的移动端组件（如 MobileNav、MobileStatsGrid）添加移动端适配。
- 若需要状态概览卡片，可参考仪表盘和图表组件目录进行复用。

---

### 示例：Nginx 代理 24 个项目

```nginx
# 主域名：门户（仪表盘）
server {
    listen 80;
    server_name 0379.world;
    location / {
        proxy_pass http://localhost:3000; # 仪表盘项目运行端口
    }
}

# 子域名：逐个代理到 Vercel 或自定义域
server {
    listen 80;
    server_name yyc.0379.world;
    location / { proxy_pass https://yyc3.vercel.app; }
}

server {
    listen 80;
    server_name xy.0379.world;
    location / { proxy_pass https://xy.yanyu.red; }
}

# …按此模式扩展到 24 项
```

- 你也可以将这些目标 URL 抽象为变量，便于统一维护与更新。
- 结合项目中“通讯中心”“系统控制台”等页面，可在门户侧展示运行状态与通知.

---

### DNS 与解析清单（执行顺序）

- 将 0379.world 的 A 记录解析到阿里云服务器公网 IP。
- 为每个子域名（24 个）添加 A 记录解析到同一公网 IP。
- 在服务器完成上述 Nginx 代理配置，并启动仪表盘项目服务。

这样即可实现“备案域名 → 阿里云服务器 → 门户仪表盘 + 24 子域名代理到各自项目”的合规中转与集中展示。

---

### 可选增强

- 使用权限模块按角色显示项目入口（super_admin/admin/manager 等），参考 auth 目录与 PermissionGate。
- 加入通知中心与活动流组件，展示部署、健康与审阅队列变更。
- 将“应用清单”改为动态来源（后端 API 或配置文件），便于批量增删项目.

## 基于项目结构生成一个“24 项应用清单”的 JSON 配置与前端适配代码

## Docker/Nginx 一键部署脚本

好的，Yu。你当前的仓库代码片段展示了 **PermissionGate** 组件，用于在前端根据用户权限控制内容显示。这说明你的项目是基于 **Next.js + React + TypeScript** 的前端应用，适合容器化部署。下面我为你提供一个 **Docker + Nginx 一键部署脚本**，用于快速在阿里云服务器上运行并代理你的应用。

---

## 🐳 Dockerfile（构建 Next.js 应用）

```dockerfile
# 使用 Node.js 构建阶段
FROM node:20-alpine AS builder

WORKDIR /app

# 安装依赖
COPY package.json package-lock.json* pnpm-lock.yaml* yarn.lock* ./
RUN npm install --frozen-lockfile

# 拷贝源代码
COPY . .

# 构建 Next.js 应用
RUN npm run build

# 使用轻量级镜像运行
FROM node:20-alpine AS runner

WORKDIR /app

ENV NODE_ENV production

# 拷贝构建产物
COPY --from=builder /app/.next ./.next
COPY --from=builder /app/public ./public
COPY --from=builder /app/package.json ./package.json

# 安装生产依赖
RUN npm install --omit=dev --ignore-scripts

EXPOSE 3000

CMD ["npm", "run", "start"]
```

---

## 🌐 Nginx 配置（反向代理）

在阿里云服务器上，你可以用 Nginx 将备案域名指向 Docker 容器。

```nginx
server {
    listen 80;
    server_name 0379.world;

    location / {
        proxy_pass http://127.0.0.1:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

---

## ⚙️ docker-compose.yml（快速启动）

```yaml
version: "3.9"

services:
  dashboard:
    build: .
    container_name: yyc3-dashboard
    restart: always
    ports:
      - "3000:3000"
    networks:
      - webnet

  nginx:
    image: nginx:latest
    container_name: nginx-proxy
    restart: always
    volumes:
      - ./nginx.conf:/etc/nginx/conf.d/default.conf
    ports:
      - "80:80"
      - "443:443"
    networks:
      - webnet

networks:
  webnet:
```

---

## 🚀 一键部署流程

1. 将上述 `Dockerfile`、`docker-compose.yml` 和 `nginx.conf` 放在项目根目录。  
2. 在服务器执行：

   ```bash
   docker-compose up -d --build
   ```

3. 确保 DNS 已将 `0379.world` 指向服务器公网 IP。  
4. 浏览器访问 `http://0379.world` 即可看到仪表盘项目。  

---

## ✨ 配置特点

- **Dockerfile**：保证前端应用可移植、可复现。  
- **Nginx**：负责备案域名的反向代理，合规访问。  
- **docker-compose**：一键启动，自动拉起应用和代理。  

---
