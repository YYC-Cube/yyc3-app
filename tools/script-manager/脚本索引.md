# YYC3 脚本综合管理系统索引

> 📋 **文档版本**: v1.0.0 | **创建时间**: 2025-12-08 | **维护团队**: YYC3 AI Family

## 📖 系统概述

YYC3脚本综合管理系统统一管理所有平台脚本，提供清晰的分类、中文命名和完整的索引，确保脚本的可维护性和易用性。

## 📁 脚本分类索引

### 🚀 部署脚本 (Deployment Scripts)

#### 数据库部署
- **`PostgreSQL数据库部署.sh`** - 在NAS或服务器上部署PostgreSQL数据库
  - 原始文件: `nas-deploy/postgres-on-nas.sh`
  - 功能: 自动安装和配置PostgreSQL数据库服务
  - 依赖: Ubuntu/Linux系统，sudo权限

- **`Ubuntu安装PostgreSQL.sh`** - Ubuntu系统PostgreSQL安装脚本
  - 原始文件: `nas-deploy/install-postgres-ubuntu-fixed.sh`
  - 功能: 在Ubuntu系统上安装PostgreSQL最新稳定版
  - 依赖: Ubuntu系统，网络连接

#### 服务部署
- **`部署到yyc3-33服务器.sh`** - 完整服务栈部署到8.152.195.33服务器
  - 原始文件: `deploy-to-yyc3-33.sh`
  - 功能: 部署监控栈、Nginx、SSL、防火墙等完整服务
  - 依赖: SSH访问，Docker，域名配置

#### 应用部署
- **`部署星云操作系统.sh`** - 部署星云操作系统应用
  - 原始文件: `yyc3-futuristic-dashboard/scripts/deploy.sh`
  - 功能: 安装依赖、构建、启动星云操作系统
  - 依赖: pnpm，Node.js

### 📊 监控脚本 (Monitoring Scripts)

#### 健康检查
- **`应用健康检查.sh`** - 应用服务健康状态检查
  - 原始文件: `yyc3-futuristic-dashboard/scripts/health-check.sh`
  - 功能: 检查应用运行状态、端口可用性
  - 依赖: curl，网络连接

#### 服务监控
- **`应用监控服务.sh`** - 应用服务监控脚本
  - 原始文件: `yyc3-futuristic-dashboard/scripts/monitor.sh`
  - 功能: 持续监控服务状态、性能指标
  - 依赖: 系统监控工具

### 💾 备份脚本 (Backup Scripts)

#### 数据备份
- **`应用数据备份.sh`** - 应用数据自动备份
  - 原始文件: `yyc3-futuristic-dashboard/scripts/backup.sh`
  - 功能: 备份应用数据、配置文件、数据库
  - 依赖: 存储空间，备份工具

### 🔧 维护脚本 (Maintenance Scripts)

#### 故障排除
- **`修复仪表盘3100端口.sh`** - 修复仪表盘服务端口冲突
  - 原始文件: `fix-dashboard-3100.sh`
  - 功能: 解决3100端口占用问题，重启服务
  - 依赖: 管理员权限

### ⚡ 服务管理 (Service Management)

#### 启动脚本
- **`启动YYC3全栈服务.sh`** - 一键启动所有YYC3服务
  - 原始文件: 新创建
  - 功能: 启动API、管理后台、LLM、邮件、AI、应用、Redis服务
  - 端口: 6600-6606
  - 依赖: Node.js，服务文件

#### 停止脚本
- **`停止YYC3全栈服务.sh`** - 优雅停止所有YYC3服务
  - 原始文件: 新创建
  - 功能: 优雅停止、强制停止、清理临时文件
  - 参数: `--force` 强制停止，`--cleanup` 清理文件
  - 依赖: 进程管理工具

#### 重启脚本
- **`重启YYC3服务.sh`** - 重启所有YYC3服务 (计划创建)
  - 功能: 停止后重新启动所有服务
  - 依赖: 停止和启动脚本

#### 状态检查
- **`检查YYC3服务状态.sh`** - 检查所有服务运行状态 (计划创建)
  - 功能: 检查端口、进程、健康状态
  - 依赖: 网络工具

## 🔧 核心服务管理脚本

### YYC3全栈服务管理

#### 服务端口分配
| 服务名称 | 端口 | 功能描述 | 状态检查 |
|---------|------|----------|----------|
| API服务 | 6600 | REST API接口，数据网关 | `/health` |
| 管理后台 | 6601 | Web管理界面，系统监控 | `/health` |
| LLM服务 | 6602 | 大语言模型服务，AI对话 | `/health` |
| 邮件服务 | 6603 | 邮件发送，通知服务 | `/health` |
| AI服务 | 6604 | AI功能处理，智能计算 | `/health` |
| 应用服务 | 6605 | 主应用服务，业务逻辑 | `/health` |
| Redis服务 | 6606 | 缓存服务，会话管理 | `/health` |

#### 启动脚本使用
```bash
# 基本启动
./启动YYC3全栈服务.sh

# 查看启动日志
tail -f /Users/yanyu/www/logs/api-service.log
tail -f /Users/yanyu/www/logs/admin-service.log
# ... 其他服务日志
```

#### 停止脚本使用
```bash
# 优雅停止
./停止YYC3全栈服务.sh

# 强制停止
./停止YYC3全栈服务.sh --force

# 停止并清理
./停止YYC3全栈服务.sh --cleanup

# 查看帮助
./停止YYC3全栈服务.sh --help
```

## 📝 脚本使用规范

### 执行前检查
1. **环境验证**: 确认所需环境和依赖已安装
2. **权限检查**: 确保有足够的执行权限
3. **端口检查**: 确认目标端口可用性
4. **备份重要**: 重要操作前进行数据备份

### 执行注意事项
1. **按顺序执行**: 依赖关系的脚本按正确顺序执行
2. **监控输出**: 关注脚本执行输出和错误信息
3. **日志记录**: 重要操作保留执行日志
4. **回滚准备**: 准备失败时的回滚方案

### 执行后验证
1. **服务状态**: 检查相关服务是否正常运行
2. **端口监听**: 验证端口是否正确监听
3. **功能测试**: 测试核心功能是否正常
4. **日志检查**: 查看服务日志是否有错误

## 🛠️ 自定义和扩展

### 添加新脚本
1. **确定分类**: 根据功能确定脚本分类
2. **中文命名**: 使用清晰的中文文件名
3. **添加头部**: 包含功能描述、依赖、使用说明
4. **参数处理**: 支持命令行参数和帮助信息
5. **错误处理**: 完善的错误处理和退出码

### 脚本模板
```bash
#!/bin/bash

# 脚本功能描述
# 创建时间: YYYY-MM-DD
# 维护团队: YYC3 AI Family

set -e

# 颜色定义
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m'

# 主要功能
main() {
    echo -e "${BLUE}🚀 开始执行脚本${NC}"

    # 脚本逻辑

    echo -e "${GREEN}✅ 脚本执行完成${NC}"
}

# 参数处理
while [[ $# -gt 0 ]]; do
    case $1 in
        --help|-h)
            echo "用法: $0 [选项]"
            echo "选项:"
            echo "  --help, -h     显示帮助信息"
            exit 0
            ;;
        *)
            echo -e "${RED}❌ 未知选项: $1${NC}"
            exit 1
            ;;
    esac
done

# 脚本入口
if [[ "${BASH_SOURCE[0]}" == "${0}" ]]; then
    main "$@"
fi
```

## 📊 维护和更新

### 定期维护任务
- **每月**: 检查脚本有效性，更新过时配置
- **每季**: 审查脚本依赖，更新版本信息
- **每年**: 重构复杂脚本，优化性能

### 脚本更新流程
1. **需求分析**: 明确更新需求和目标
2. **备份原版**: 备份当前工作版本
3. **开发测试**: 在测试环境验证更改
4. **文档更新**: 同步更新相关文档
5. **发布部署**: 替换生产版本并验证

### 版本控制
- **Git仓库**: 所有脚本纳入版本控制
- **变更记录**: 详细记录每次变更内容
- **标签管理**: 重要版本打标签管理
- **回滚机制**: 支持快速回滚到历史版本

## 🚨 故障排除

### 常见问题
1. **权限不足**: 使用 `chmod +x` 添加执行权限
2. **依赖缺失**: 检查并安装所需依赖
3. **端口冲突**: 修改配置或停止冲突服务
4. **环境变量**: 确认环境变量正确设置

### 调试方法
1. **详细输出**: 使用 `-x` 参数显示执行过程
2. **日志分析**: 查看详细日志信息
3. **分步执行**: 将复杂脚本分解执行
4. **测试环境**: 在测试环境先验证脚本

## 📞 技术支持

### 联系方式
- **维护团队**: YYC3 AI Family
- **问题报告**: 通过项目Issues提交问题
- **功能建议**: 欢迎提出改进建议

### 贡献指南
1. **遵循规范**: 按照命名和代码规范
2. **测试验证**: 确保脚本功能完整
3. **文档同步**: 更新相关文档说明
4. **代码审查**: 提交前进行代码审查

---

<div align="center">

**[⬆️ 回到顶部](#yyc3-脚本综合管理系统索引)**

Made with ❤️ by YYC3 AI Family Team

**言启象限，语枢智能** 📋

</div>