# 创建批处理任务

> 创建一个新的批量处理任务。见 [批量服务](/cn/guide/tools/batch)

## OpenAPI

````yaml openapi/openapi.json post /paas/v4/batches
paths:
  path: /paas/v4/batches
  method: post
  servers:
    - url: https://open.bigmodel.cn/api/
      description: 开放平台服务
  request:
    security:
      - title: bearerAuth
        parameters:
          query: {}
          header:
            Authorization:
              type: http
              scheme: bearer
              description: >-
                使用以下格式进行身份验证：Bearer [<your api
                key>](https://bigmodel.cn/usercenter/proj-mgmt/apikeys)
          cookie: {}
    parameters:
      path: {}
      query: {}
      header: {}
      cookie: {}
    body:
      application/json:
        schemaArray:
          - type: object
            properties:
              input_file_id:
                allOf:
                  - type: string
                    description: >-
                      上传文件的 `ID`，该文件包含`Batch`的请求。输入文件必须是 `.Jsonl`
                      格式，并且文件上传时的目的必须标记为"batch"。
              endpoint:
                allOf:
                  - type: string
                    description: '`Batch` 中所有请求将使用的端点。目前支持 `/v4/chat/completions`。'
                    enum:
                      - /v4/chat/completions
              auto_delete_input_file:
                allOf:
                  - type: boolean
                    description: >-
                      是否自动删除`batch`原始文件，默认为`True`：`True`：执行自动删除。`False`：保留原始`batch`文件。
                    default: true
              metadata:
                allOf:
                  - type: object
                    nullable: true
                    description: >-
                      用于存储与 `Batch`
                      相关的数据，如客户`I`D、描述或其他任务管理和跟踪所需的额外信息。可附加到对象上的键值对集合最多为 `16`
                      个。每个键的长度最多为 `64` 个字符，每个值的长度最多为 `512` 个字符。
            required: true
            refIdentifier: '#/components/schemas/BatchCreateRequest'
            requiredProperties:
              - input_file_id
              - endpoint
        examples:
          example:
            value:
              input_file_id: <string>
              endpoint: /v4/chat/completions
              auto_delete_input_file: true
              metadata: {}
  response:
    '200':
      application/json:
        schemaArray:
          - type: object
            properties:
              id:
                allOf:
                  - type: string
                    description: 批处理的唯一标识符。
              object:
                allOf:
                  - type: string
                    description: 对象类型，这里为 `batch`。
              endpoint:
                allOf:
                  - type: string
                    description: 批处理使用的 `API` 端点。
              input_file_id:
                allOf:
                  - type: string
                    description: 批处理使用的输入文件的`ID`。
              completion_window:
                allOf:
                  - type: string
                    description: 批处理应在此时间框架内完成的期限。
              status:
                allOf:
                  - type: string
                    description: 批处理的当前状态。
              output_file_id:
                allOf:
                  - type: string
                    description: 包含成功执行请求的输出的文件`ID`。
              error_file_id:
                allOf:
                  - type: string
                    description: 包含出现错误的请求的输出的文件`ID`。
              created_at:
                allOf:
                  - type: integer
                    description: 创建批处理的`Unix`时间戳（秒）。
              in_progress_at:
                allOf:
                  - type: integer
                    description: 批处理开始处理的`Unix`时间戳（秒）。
              expires_at:
                allOf:
                  - type: integer
                    description: 批处理将过期的`Unix`时间戳（秒）。
              finalizing_at:
                allOf:
                  - type: integer
                    description: 批处理开始最终处理的`Unix`时间戳（秒）。
              completed_at:
                allOf:
                  - type: integer
                    description: 批处理完成的`Unix`时间戳（秒）。
              failed_at:
                allOf:
                  - type: integer
                    description: 批处理失败的`Unix`时间戳（秒）。
              expired_at:
                allOf:
                  - type: integer
                    description: 批处理过期的`Unix`时间戳（秒）。
              cancelling_at:
                allOf:
                  - type: integer
                    description: 批处理开始取消的`Unix`时间戳（秒）。
              cancelled_at:
                allOf:
                  - type: integer
                    description: 批处理取消完成的`Unix`时间戳（秒）。
              request_counts:
                allOf:
                  - type: integer
                    description: batch 请求计数。
              total:
                allOf:
                  - type: integer
                    description: 批处理中的请求总数。
              completed:
                allOf:
                  - type: integer
                    description: 批处理中已成功完成的请求数量。
              failed:
                allOf:
                  - type: integer
                    description: 批处理中失败的请求数量。
              metadata:
                allOf:
                  - type: object
                    description: >-
                      可附加到对象上的 `16` 个键值对的集合。这有助于以结构化格式存储对象的附加信息。键的长度最多为 `64`
                      个字符，值的长度最多为 `512` 个字符。
            refIdentifier: '#/components/schemas/Batch'
        examples:
          example:
            value:
              id: <string>
              object: <string>
              endpoint: <string>
              input_file_id: <string>
              completion_window: <string>
              status: <string>
              output_file_id: <string>
              error_file_id: <string>
              created_at: 123
              in_progress_at: 123
              expires_at: 123
              finalizing_at: 123
              completed_at: 123
              failed_at: 123
              expired_at: 123
              cancelling_at: 123
              cancelled_at: 123
              request_counts: 123
              total: 123
              completed: 123
              failed: 123
              metadata: {}
        description: 业务处理成功
    default:
      application/json:
        schemaArray:
          - type: object
            properties:
              error:
                allOf:
                  - required:
                      - code
                      - message
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
            refIdentifier: '#/components/schemas/Error'
        examples:
          example:
            value:
              error:
                code: <string>
                message: <string>
        description: 请求失败。
  deprecated: false
  type: path
components:
  schemas: {}

````