# 异步结果

> 查询智能体异步任务的处理结果和状态。

## OpenAPI

````yaml openapi/openapi.json post /v1/agents/async-result
paths:
  path: /v1/agents/async-result
  method: post
  servers:
    - url: https://open.bigmodel.cn/api/
      description: 开放平台服务
  request:
    security:
      - title: bearerAuth
        parameters:
          query: {}
          header:
            Authorization:
              type: http
              scheme: bearer
              description: >-
                使用以下格式进行身份验证：Bearer [<your api
                key>](https://bigmodel.cn/usercenter/proj-mgmt/apikeys)
          cookie: {}
    parameters:
      path: {}
      query: {}
      header: {}
      cookie: {}
    body:
      application/json:
        schemaArray:
          - type: object
            properties:
              async_id:
                allOf:
                  - type: string
                    description: 任务ID
                    example: VHJhbnNsYXRvckVudGl0eVRhc2s6OTI5OTY5
              agent_id:
                allOf:
                  - type: string
                    description: 智能体ID
                    example: intelligent_education_correction_polling
            required: true
            requiredProperties:
              - async_id
              - agent_id
        examples:
          example:
            value:
              async_id: VHJhbnNsYXRvckVudGl0eVRhc2s6OTI5OTY5
              agent_id: intelligent_education_correction_polling
  response:
    '200':
      application/json:
        schemaArray:
          - type: object
            properties:
              agent_id:
                allOf:
                  - type: string
                    description: 智能体`ID`
              async_id:
                allOf:
                  - type: string
                    description: 异步任务的`ID`
              status:
                allOf:
                  - type: string
                    description: 任务状态，`success/failed/pending`
                    enum:
                      - success
                      - failed
                      - pending
              choices:
                allOf:
                  - type: array
                    description: '`agent`输出'
                    items:
                      type: object
                      properties:
                        messages:
                          type: array
                          items:
                            type: object
                            properties:
                              role:
                                type: string
                                description: 用户的输入 `role = assistant`
                              content:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    type:
                                      type: string
                                      description: 目前支持 `type=file_url`
                                    file_url:
                                      type: string
                                      description: url链接
                                    tag_cn:
                                      type: string
                                      description: 中文描述
                                    tag_en:
                                      type: string
                                      description: 英文描述
              usage:
                allOf:
                  - type: object
                    properties:
                      total_tokens:
                        type: integer
                        description: 消耗总`tokens`数
            refIdentifier: '#/components/schemas/AgentAsyncResultResponse'
        examples:
          example:
            value:
              agent_id: <string>
              async_id: <string>
              status: success
              choices:
                - messages:
                    - role: <string>
                      content:
                        - type: <string>
                          file_url: <string>
                          tag_cn: <string>
                          tag_en: <string>
              usage:
                total_tokens: 123
        description: 业务处理成功
    default:
      application/json:
        schemaArray:
          - type: object
            properties:
              error:
                allOf:
                  - required:
                      - code
                      - message
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
            refIdentifier: '#/components/schemas/Error'
        examples:
          example:
            value:
              error:
                code: <string>
                message: <string>
        description: 请求失败。
  deprecated: false
  type: path
components:
  schemas: {}

````