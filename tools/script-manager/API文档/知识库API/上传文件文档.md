# 上传文件文档

> 向指定知识库上传文件类型文档，支持多种切片方式和回调。

## OpenAPI

````yaml openapi/openapi.json post /llm-application/open/document/upload_document/{id}
paths:
  path: /llm-application/open/document/upload_document/{id}
  method: post
  servers:
    - url: https://open.bigmodel.cn/api/
      description: 开放平台服务
  request:
    security:
      - title: bearerAuth
        parameters:
          query: {}
          header:
            Authorization:
              type: http
              scheme: bearer
              description: >-
                使用以下格式进行身份验证：Bearer [<your api
                key>](https://bigmodel.cn/usercenter/proj-mgmt/apikeys)
          cookie: {}
    parameters:
      path:
        id:
          schema:
            - type: string
              required: true
              description: 知识库id
      query: {}
      header: {}
      cookie: {}
    body:
      multipart/form-data:
        schemaArray:
          - type: object
            properties:
              files:
                allOf:
                  - type: string
                    format: binary
                    description: 文件
              knowledge_type:
                allOf:
                  - type: integer
                    description: |-
                      文档类型，不传则动态解析。
                      1: 按标题段落切：支持txt,doc,pdf,url,docx,ppt,pptx,md
                      2: 按问答对切片：支持txt,doc,pdf,url,docx,ppt,pptx,md
                      3: 按行切片：支持xls,xlsx,csv
                      5: 自定义切片：支持txt,doc,pdf,url,docx,ppt,pptx,md
                      6: 按页切片：支持pdf,ppt,pptx
                      7: 按单个切片：支持xls,xlsx,csv
              custom_separator:
                allOf:
                  - type: array
                    items:
                      type: string
                    description: |
                      自定义切片规则，knowledge_type=5时传，默认
              sentence_size:
                allOf:
                  - type: integer
                    description: 自定义切片大小，knowledge_type=5时传，20-2000，默认300
              parse_image:
                allOf:
                  - type: boolean
                    description: 是否解析图片，默认不解析
              callback_url:
                allOf:
                  - type: string
                    description: 回调地址
              callback_header:
                allOf:
                  - type: object
                    description: 回调时header携带的k-v
              word_num_limit:
                allOf:
                  - type: string
                    description: 文档字数上限，必须为数字
              req_id:
                allOf:
                  - type: string
                    description: 请求唯一id
            required: true
            refIdentifier: '#/components/schemas/DocumentUploadRequest'
            requiredProperties:
              - files
        examples:
          example:
            value:
              knowledge_type: 123
              custom_separator:
                - <string>
              sentence_size: 123
              parse_image: true
              callback_url: <string>
              callback_header: {}
              word_num_limit: <string>
              req_id: <string>
  response:
    '200':
      application/json:
        schemaArray:
          - type: object
            properties:
              data:
                allOf:
                  - type: object
                    properties:
                      successInfos:
                        type: array
                        items:
                          $ref: '#/components/schemas/DocumentUploadSuccessInfo'
                        description: 上传成功的文件
                      failedInfos:
                        type: array
                        items:
                          $ref: '#/components/schemas/DocumentUploadFailedInfo'
                        description: 上传失败的文件
              code:
                allOf:
                  - type: integer
                    description: 响应码，200为成功
              message:
                allOf:
                  - type: string
                    description: 响应信息
              timestamp:
                allOf:
                  - type: integer
                    description: 响应时间戳
            refIdentifier: '#/components/schemas/DocumentUploadResponse'
        examples:
          example:
            value:
              data:
                successInfos:
                  - documentId: <string>
                    fileName: <string>
                failedInfos:
                  - fileName: <string>
                    failReason: <string>
              code: 123
              message: <string>
              timestamp: 123
        description: 业务处理成功
    default:
      application/json:
        schemaArray:
          - type: object
            properties:
              code:
                allOf:
                  - type: integer
              message:
                allOf:
                  - type: string
            refIdentifier: '#/components/schemas/LlmApplicationError'
        examples:
          example:
            value:
              code: 123
              message: <string>
        description: 请求失败。
  deprecated: false
  type: path
components:
  schemas:
    DocumentUploadSuccessInfo:
      type: object
      properties:
        documentId:
          type: string
          description: 文档ID
        fileName:
          type: string
          description: 文件名
    DocumentUploadFailedInfo:
      type: object
      properties:
        fileName:
          type: string
          description: 文件名
        failReason:
          type: string
          description: 失败原因

````