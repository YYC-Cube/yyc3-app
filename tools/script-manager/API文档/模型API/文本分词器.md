# 文本分词器

> `Tokenizer` 用于将文本切分为模型可识别的 `token` 并计算数量。它接收用户输入的文本，通过模型进行分词处理，最终返回对应的 `token` 数量。适用于文本长度评估、模型输入预估、对话上下文截断、费用计算等。

## OpenAPI

````yaml openapi/openapi.json post /paas/v4/tokenizer
paths:
  path: /paas/v4/tokenizer
  method: post
  servers:
    - url: https://open.bigmodel.cn/api/
      description: 开放平台服务
  request:
    security:
      - title: bearerAuth
        parameters:
          query: {}
          header:
            Authorization:
              type: http
              scheme: bearer
              description: >-
                使用以下格式进行身份验证：Bearer [<your api
                key>](https://bigmodel.cn/usercenter/proj-mgmt/apikeys)
          cookie: {}
    parameters:
      path: {}
      query: {}
      header: {}
      cookie: {}
    body:
      application/json:
        schemaArray:
          - type: object
            properties:
              model:
                allOf:
                  - type: string
                    description: 调用的模型代码。
                    example: glm-4.6
                    default: glm-4.6
                    enum:
                      - glm-4.6
                      - glm-4.5
                      - glm-4.5-air
                      - glm-4-plus
                      - glm-4-0520
                      - glm-4-long
                      - glm-4-air
                      - glm-4-flash
              messages:
                allOf:
                  - type: array
                    description: >-
                      对话消息列表输入。支持四种角色：`system`（系统消息）、`user`（用户消息）、`assistant`（助手消息）、`tool`（工具消息）。
                    items:
                      oneOf:
                        - title: 用户消息
                          type: object
                          properties:
                            role:
                              type: string
                              enum:
                                - user
                              description: 消息作者的角色
                              default: user
                            content:
                              type: string
                              description: 文本消息内容
                              example: >-
                                What opportunities and challenges will the
                                Chinese large model industry face in 2025?
                          required:
                            - role
                            - content
                        - title: 系统消息
                          type: object
                          properties:
                            role:
                              type: string
                              enum:
                                - system
                              description: 消息作者的角色
                              default: system
                            content:
                              type: string
                              description: 消息文本内容
                              example: You are a helpful assistant.
                          required:
                            - role
                            - content
                        - title: 助手消息
                          type: object
                          description: 可包含工具调用
                          properties:
                            role:
                              type: string
                              enum:
                                - assistant
                              description: 消息作者的角色
                              default: assistant
                            content:
                              type: string
                              description: 文本消息内容
                              example: I'll help you with that analysis.
                          required:
                            - role
                        - title: 工具消息
                          type: object
                          properties:
                            role:
                              type: string
                              enum:
                                - tool
                              description: 消息作者的角色
                              default: tool
                            content:
                              type: string
                              description: 消息文本内容
                              example: 'Function executed successfully with result: …'
                          required:
                            - role
                            - content
                    minItems: 1
              tools:
                allOf:
                  - type: array
                    description: >-
                      模型可以调用的工具列表。支持函数调用、知识库检索和网络搜索。使用此参数提供模型可以生成 `JSON`
                      输入的函数列表或配置其他工具。最多支持 `128` 个函数。目前 `GLM-4` 系列已支持所有
                      `tools`，`GLM-4.5` 已支持 `web search` 和 `retrieval`。
                    anyOf:
                      - items:
                          $ref: '#/components/schemas/FunctionToolSchema'
              request_id:
                allOf:
                  - type: string
                    description: 由用户端传参，需保证唯一性,用户传空会默认生成
              user_id:
                allOf:
                  - type: string
                    description: 终端用户的唯一`ID`
            required: true
            refIdentifier: '#/components/schemas/TokenizerRequest'
            requiredProperties:
              - model
              - messages
        examples:
          文本分词示例:
            value:
              model: glm-4.6
              messages:
                - role: user
                  content: >-
                    What opportunities and challenges will the Chinese large
                    model industry face in 2025?
  response:
    '200':
      application/json:
        schemaArray:
          - type: object
            properties:
              created:
                allOf:
                  - type: integer
                    format: int64
                    example: 1727156815
              id:
                allOf:
                  - type: string
                    example: 20241120141244890ab4ee4af84acf
                    description: 智谱AI开放平台生成的任务序号，调用请求结果接口时请使用此序号。
              request_id:
                allOf:
                  - type: string
                    example: '1'
                    description: 请求发起时客户端提交的任务号或平台生成的任务号。
              usage:
                allOf:
                  - type: object
                    properties:
                      prompt_tokens:
                        type: number
                        description: 本次输入的 prompt tokens
                      total_tokens:
                        type: number
                        description: 本次输入的总 tokens
            refIdentifier: '#/components/schemas/TokenizerResponse'
            requiredProperties:
              - id
              - usage
        examples:
          example:
            value:
              created: 1727156815
              id: 20241120141244890ab4ee4af84acf
              request_id: '1'
              usage:
                prompt_tokens: 123
                total_tokens: 123
        description: 业务处理成功
    default:
      application/json:
        schemaArray:
          - type: object
            properties:
              error:
                allOf:
                  - required:
                      - code
                      - message
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
            refIdentifier: '#/components/schemas/Error'
        examples:
          example:
            value:
              error:
                code: <string>
                message: <string>
        description: 请求失败。
  deprecated: false
  type: path
components:
  schemas:
    FunctionToolSchema:
      type: object
      title: Function Call
      properties:
        type:
          type: string
          default: function
          enum:
            - function
        function:
          $ref: '#/components/schemas/FunctionObject'
      required:
        - type
        - function
      additionalProperties: false
    FunctionObject:
      type: object
      properties:
        name:
          type: string
          description: 要调用的函数名称。必须是 `a-z、A-Z、0-9`，或包含下划线和破折号，最大长度为 `64`。
          minLength: 1
          maxLength: 64
          pattern: ^[a-zA-Z0-9_-]+$
        description:
          type: string
          description: 函数功能的描述，供模型选择何时以及如何调用函数。
        parameters:
          $ref: '#/components/schemas/FunctionParameters'
      required:
        - name
        - description
        - parameters
    FunctionParameters:
      type: object
      description: 使用 `JSON Schema` 定义的参数。必须传递 `JSON Schema` 对象以准确定义接受的参数。如果调用函数时不需要参数，则省略。
      additionalProperties: true

````