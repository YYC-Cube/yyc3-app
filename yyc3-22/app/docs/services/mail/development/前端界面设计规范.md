# ğŸš€ ğŸš€ YYCÂ³é‚®ä»¶å¹³å° - å‰ç«¯ç•Œé¢è®¾è®¡è§„èŒƒ

> **YYCÂ³ é¡¹ç›®æ–‡æ¡£**
> 
> @project YYCÂ³ Email Platform
> @type æŠ€æœ¯æ–‡æ¡£
> @version 1.0.0
> @created 2025-12-08
> @updated 2025-12-08
> @author YYCÂ³ <admin@0379.email>
> @url https://github.com/YYC-Cube/yyc3-app.git

## ğŸ“‹ è®¾è®¡æ¦‚è¿°

**è®¾è®¡å“²å­¦**: ç®€æ´ã€ä¸“ä¸šã€é«˜æ•ˆ  
**æŠ€æœ¯æ ˆ**: Next.js 14 + TypeScript + Tailwind CSS + Radix UI  
**è®¾è®¡ç³»ç»Ÿ**: åŸºäºDesign Tokensçš„ç»„ä»¶åŒ–è®¾è®¡  
**å“åº”å¼**: Mobile-first + Desktopä¼˜åŒ–  

### ğŸ¯ è®¾è®¡åŸåˆ™

1. **ç”¨æˆ·ä½“éªŒä¼˜å…ˆ**: ç®€æ´ç›´è§‚çš„äº¤äº’è®¾è®¡
2. **ä¸€è‡´æ€§**: ç»Ÿä¸€çš„è®¾è®¡è¯­è¨€å’Œç»„ä»¶åº“
3. **å¯è®¿é—®æ€§**: WCAG 2.1 AAçº§åˆ«æ ‡å‡†
4. **æ€§èƒ½å¯¼å‘**: å¿«é€ŸåŠ è½½å’Œæµç•…åŠ¨ç”»
5. **å¯ç»´æŠ¤æ€§**: ç»„ä»¶åŒ–å¼€å‘å’Œä»£ç å¤ç”¨

## ğŸ¨ è®¾è®¡ç³»ç»Ÿ

### Design Tokens

#### é¢œè‰²ç³»ç»Ÿ
```typescript
// styles/design-tokens.ts
export const colors = {
  // ä¸»è‰²ç³»ç»Ÿ
  primary: {
    50: '#eff6ff',
    100: '#dbeafe',
    200: '#bfdbfe',
    300: '#93c5fd',
    400: '#60a5fa',
    500: '#3b82f6',
    600: '#2563eb',
    700: '#1d4ed8',
    800: '#1e40af',
    900: '#1e3a8a',
    950: '#172554'
  },
  
  // åŠŸèƒ½è‰²ç³»ç»Ÿ
  success: {
    50: '#f0fdf4',
    100: '#dcfce7',
    200: '#bbf7d0',
    300: '#86efac',
    400: '#4ade80',
    500: '#22c55e',
    600: '#16a34a',
    700: '#15803d',
    800: '#166534',
    900: '#14532d',
    950: '#052e16'
  },
  
  warning: {
    50: '#fffbeb',
    100: '#fef3c7',
    200: '#fde68a',
    300: '#fcd34d',
    400: '#fbbf24',
    500: '#f59e0b',
    600: '#d97706',
    700: '#b45309',
    800: '#92400e',
    900: '#78350f',
    950: '#451a03'
  },
  
  error: {
    50: '#fef2f2',
    100: '#fee2e2',
    200: '#fecaca',
    300: '#fca5a5',
    400: '#f87171',
    500: '#ef4444',
    600: '#dc2626',
    700: '#b91c1c',
    800: '#991b1b',
    900: '#7f1d1d',
    950: '#450a0a'
  },
  
  // ä¸­æ€§è‰²ç³»ç»Ÿ
  neutral: {
    50: '#fafafa',
    100: '#f5f5f5',
    200: '#e5e5e5',
    300: '#d4d4d4',
    400: '#a3a3a3',
    500: '#737373',
    600: '#525252',
    700: '#404040',
    800: '#262626',
    900: '#171717',
    950: '#0a0a0a'
  },
  
  // é‚®ä»¶çŠ¶æ€é¢œè‰²
  email: {
    draft: '#6b7280',
    sent: '#3b82f6',
    delivered: '#10b981',
    read: '#059669',
    failed: '#ef4444',
    bounced: '#f59e0b'
  }
} as const;
```

#### å­—ä½“ç³»ç»Ÿ
```typescript
export const typography = {
  fontFamily: {
    sans: ['Inter', 'system-ui', 'sans-serif'],
    mono: ['JetBrains Mono', 'Consolas', 'monospace']
  },
  
  fontSize: {
    // æ ‡é¢˜å­—ä½“
    'display-lg': ['3rem', { lineHeight: '1.1', letterSpacing: '-0.02em' }],
    'display-md': ['2.25rem', { lineHeight: '1.2', letterSpacing: '-0.01em' }],
    'display-sm': ['1.875rem', { lineHeight: '1.3' }],
    
    // æ ‡é¢˜å±‚çº§
    'heading-lg': ['1.5rem', { lineHeight: '1.4' }],
    'heading-md': ['1.25rem', { lineHeight: '1.4' }],
    'heading-sm': ['1.125rem', { lineHeight: '1.4' }],
    'heading-xs': ['1rem', { lineHeight: '1.4' }],
    
    // æ­£æ–‡æ–‡å­—
    'body-lg': ['1rem', { lineHeight: '1.6' }],
    'body-md': ['0.875rem', { lineHeight: '1.6' }],
    'body-sm': ['0.75rem', { lineHeight: '1.5' }],
    
    // åŠŸèƒ½æ–‡å­—
    'label-lg': ['0.875rem', { lineHeight: '1.5', fontWeight: '500' }],
    'label-md': ['0.75rem', { lineHeight: '1.5', fontWeight: '500' }],
    'label-sm': ['0.625rem', { lineHeight: '1.4', fontWeight: '500' }]
  },
  
  fontWeight: {
    thin: '100',
    light: '300',
    normal: '400',
    medium: '500',
    semibold: '600',
    bold: '700',
    extrabold: '800'
  }
} as const;
```

#### é—´è·ç³»ç»Ÿ
```typescript
export const spacing = {
  // åŸºç¡€é—´è·å•ä½ (4px)
  unit: 4,
  
  // é—´è·å°ºå¯¸
  xs: '4px',   // 0.25rem
  sm: '8px',   // 0.5rem
  md: '16px',  // 1rem
  lg: '24px',  // 1.5rem
  xl: '32px',  // 2rem
  '2xl': '48px', // 3rem
  '3xl': '64px', // 4rem
  '4xl': '96px', // 6rem
  
  // ç»„ä»¶é—´è·
  section: '64px',   // é¡µé¢åŒºå—é—´è·
  component: '32px', // ç»„ä»¶é—´è·
  element: '16px',   // å…ƒç´ é—´è·
  tight: '8px'       // ç´§å¯†é—´è·
} as const;
```

#### é˜´å½±ç³»ç»Ÿ
```typescript
export const shadows = {
  // åŸºç¡€é˜´å½±
  sm: '0 1px 2px 0 rgb(0 0 0 / 0.05)',
  base: '0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)',
  md: '0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)',
  lg: '0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)',
  xl: '0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)',
  '2xl': '0 25px 50px -12px rgb(0 0 0 / 0.25)',
  
  // ç‰¹æ®Šé˜´å½±
  inner: 'inset 0 2px 4px 0 rgb(0 0 0 / 0.05)',
  outline: '0 0 0 3px rgb(59 130 246 / 0.1)',
  
  // æµ®å±‚é˜´å½±
  modal: '0 25px 50px -12px rgb(0 0 0 / 0.25)',
  dropdown: '0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.05)',
  tooltip: '0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.05)'
} as const;
```

#### åœ†è§’ç³»ç»Ÿ
```typescript
export const borderRadius = {
  none: '0',
  sm: '4px',
  base: '6px',
  md: '8px',
  lg: '12px',
  xl: '16px',
  '2xl': '24px',
  full: '9999px'
} as const;
```

### åŠ¨ç”»ç³»ç»Ÿ
```typescript
export const animations = {
  // ç¼“åŠ¨å‡½æ•°
  easing: {
    linear: 'linear',
    ease: 'ease',
    easeIn: 'cubic-bezier(0.4, 0, 1, 1)',
    easeOut: 'cubic-bezier(0, 0, 0.2, 1)',
    easeInOut: 'cubic-bezier(0.4, 0, 0.2, 1)',
    backOut: 'cubic-bezier(0.34, 1.56, 0.64, 1)',
    bounceOut: 'cubic-bezier(0.34, 1.56, 0.64, 1)'
  },
  
  // åŠ¨ç”»æ—¶é•¿
  duration: {
    fast: '150ms',
    normal: '200ms',
    slow: '300ms',
    slower: '500ms',
    slowest: '1000ms'
  },
  
  // å¸¸ç”¨åŠ¨ç”»
  transitions: {
    fadeIn: 'fadeIn 200ms ease-out',
    fadeOut: 'fadeOut 150ms ease-in',
    slideIn: 'slideIn 300ms ease-out',
    slideOut: 'slideOut 200ms ease-in',
    scaleIn: 'scaleIn 200ms ease-out',
    scaleOut: 'scaleOut 150ms ease-in'
  }
} as const;

// CSSåŠ¨ç”»å…³é”®å¸§
export const keyframes = {
  fadeIn: `
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  `,
  
  slideIn: `
    from {
      transform: translateY(-10px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  `,
  
  scaleIn: `
    from {
      transform: scale(0.95);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  `,
  
  shimmer: `
    0% {
      background-position: -468px 0;
    }
    100% {
      background-position: 468px 0;
    }
  `
} as const;
```

## ğŸ§© ç»„ä»¶è®¾è®¡è§„èŒƒ

### 1. æŒ‰é’®ç»„ä»¶ (Button)

#### è®¾è®¡è§„èŒƒ
```tsx
// components/ui/Button.tsx
import React from 'react';
import { cva, type VariantProps } from 'class-variance-authority';
import { cn } from '@/lib/utils';

const buttonVariants = cva(
  // åŸºç¡€æ ·å¼
  'inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors',
  'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2',
  'disabled:pointer-events-none disabled:opacity-50',
  {
    variants: {
      variant: {
        // ä¸»è¦æŒ‰é’®
        primary: 'bg-primary-600 text-white hover:bg-primary-700 active:bg-primary-800',
        
        // æ¬¡è¦æŒ‰é’®
        secondary: 'bg-neutral-100 text-neutral-900 hover:bg-neutral-200 active:bg-neutral-300',
        
        // è½®å»“æŒ‰é’®
        outline: 'border border-neutral-300 bg-transparent hover:bg-neutral-50 active:bg-neutral-100',
        
        // å¹½çµæŒ‰é’®
        ghost: 'hover:bg-neutral-100 active:bg-neutral-200',
        
        // é“¾æ¥æŒ‰é’®
        link: 'text-primary-600 underline-offset-4 hover:underline',
        
        // å±é™©æŒ‰é’®
        danger: 'bg-error-600 text-white hover:bg-error-700 active:bg-error-800',
        
        // æˆåŠŸæŒ‰é’®
        success: 'bg-success-600 text-white hover:bg-success-700 active:bg-success-800'
      },
      size: {
        sm: 'h-8 px-3 text-xs',
        md: 'h-10 px-4 py-2',
        lg: 'h-12 px-6 text-base',
        xl: 'h-14 px-8 text-lg',
        icon: 'h-10 w-10'
      }
    },
    defaultVariants: {
      variant: 'primary',
      size: 'md'
    }
  }
);

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  loading?: boolean;
  leftIcon?: React.ReactNode;
  rightIcon?: React.ReactNode;
}

export const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ 
    className, 
    variant, 
    size, 
    loading = false,
    leftIcon,
    rightIcon,
    children,
    disabled,
    ...props 
  }, ref) => {
    return (
      <button
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        disabled={disabled || loading}
        {...props}
      >
        {loading && (
          <svg 
            className="animate-spin -ml-1 mr-2 h-4 w-4" 
            xmlns="http://www.w3.org/2000/svg" 
            fill="none" 
            viewBox="0 0 24 24"
          >
            <circle 
              className="opacity-25" 
              cx="12" 
              cy="12" 
              r="10" 
              stroke="currentColor" 
              strokeWidth="4"
            />
            <path 
              className="opacity-75" 
              fill="currentColor" 
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            />
          </svg>
        )}
        {!loading && leftIcon && <span className="mr-2">{leftIcon}</span>}
        {children}
        {!loading && rightIcon && <span className="ml-2">{rightIcon}</span>}
      </button>
    );
  }
);

Button.displayName = 'Button';
```

#### ä½¿ç”¨ç¤ºä¾‹
```tsx
// ä½¿ç”¨ç¤ºä¾‹
const ButtonExamples = () => {
  return (
    <div className="space-y-4">
      {/* ä¸»è¦æŒ‰é’® */}
      <Button variant="primary" size="md">
        å‘é€é‚®ä»¶
      </Button>
      
      {/* åŠ è½½çŠ¶æ€ */}
      <Button variant="primary" size="md" loading>
        å‘é€ä¸­...
      </Button>
      
      {/* å¸¦å›¾æ ‡ */}
      <Button variant="primary" size="md" leftIcon={<SendIcon />}>
        å‘é€é‚®ä»¶
      </Button>
      
      {/* ä¸åŒå°ºå¯¸ */}
      <div className="flex gap-2">
        <Button variant="primary" size="sm">å°æŒ‰é’®</Button>
        <Button variant="primary" size="md">ä¸­æŒ‰é’®</Button>
        <Button variant="primary" size="lg">å¤§æŒ‰é’®</Button>
      </div>
      
      {/* ä¸åŒæ ·å¼ */}
      <div className="flex gap-2">
        <Button variant="primary">ä¸»è¦</Button>
        <Button variant="secondary">æ¬¡è¦</Button>
        <Button variant="outline">è½®å»“</Button>
        <Button variant="ghost">å¹½çµ</Button>
        <Button variant="link">é“¾æ¥</Button>
        <Button variant="danger">å±é™©</Button>
      </div>
    </div>
  );
};
```

### 2. è¾“å…¥æ¡†ç»„ä»¶ (Input)

#### è®¾è®¡è§„èŒƒ
```tsx
// components/ui/Input.tsx
import React from 'react';
import { cva, type VariantProps } from 'class-variance-authority';
import { cn } from '@/lib/utils';

const inputVariants = cva(
  'flex w-full rounded-md border border-neutral-300 bg-white px-3 py-2 text-sm',
  'ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium',
  'placeholder:text-neutral-500 focus-visible:outline-none focus-visible:ring-2',
  'focus-visible:ring-primary-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed',
  'disabled:opacity-50',
  {
    variants: {
      variant: {
        default: 'border-neutral-300 focus-visible:ring-primary-500',
        error: 'border-error-500 focus-visible:ring-error-500',
        success: 'border-success-500 focus-visible:ring-success-500'
      },
      size: {
        sm: 'h-8 px-2 text-xs',
        md: 'h-10 px-3 py-2',
        lg: 'h-12 px-4 py-3 text-base'
      }
    },
    defaultVariants: {
      variant: 'default',
      size: 'md'
    }
  }
);

export interface InputProps
  extends React.InputHTMLAttributes<HTMLInputElement>,
    VariantProps<typeof inputVariants> {
  label?: string;
  error?: string;
  helperText?: string;
  leftIcon?: React.ReactNode;
  rightIcon?: React.ReactNode;
  containerClassName?: string;
}

export const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({ 
    className, 
    variant,
    size,
    label,
    error,
    helperText,
    leftIcon,
    rightIcon,
    containerClassName,
    id,
    ...props 
  }, ref) => {
    const inputId = id || `input-${Math.random().toString(36).substr(2, 9)}`;
    
    return (
      <div className={cn('w-full', containerClassName)}>
        {label && (
          <label 
            htmlFor={inputId}
            className="block text-sm font-medium text-neutral-700 mb-2"
          >
            {label}
            {props.required && <span className="text-error-500 ml-1">*</span>}
          </label>
        )}
        
        <div className="relative">
          {leftIcon && (
            <div className="absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400">
              {leftIcon}
            </div>
          )}
          
          <input
            id={inputId}
            className={cn(
              inputVariants({ variant: error ? 'error' : variant, size }),
              leftIcon && 'pl-10',
              rightIcon && 'pr-10'
            )}
            ref={ref}
            aria-invalid={!!error}
            aria-describedby={error ? `${inputId}-error` : helperText ? `${inputId}-helper` : undefined}
            {...props}
          />
          
          {rightIcon && (
            <div className="absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-400">
              {rightIcon}
            </div>
          )}
        </div>
        
        {error && (
          <p 
            id={`${inputId}-error`}
            className="mt-2 text-sm text-error-600"
            role="alert"
          >
            {error}
          </p>
        )}
        
        {helperText && !error && (
          <p 
            id={`${inputId}-helper`}
            className="mt-2 text-sm text-neutral-600"
          >
            {helperText}
          </p>
        )}
      </div>
    );
  }
);

Input.displayName = 'Input';
```

### 3. æ¨¡æ€æ¡†ç»„ä»¶ (Modal)

#### è®¾è®¡è§„èŒƒ
```tsx
// components/ui/Modal.tsx
import React, { useEffect } from 'react';
import { createPortal } from 'react-dom';
import { X } from 'lucide-react';
import { cn } from '@/lib/utils';

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  title?: string;
  description?: string;
  size?: 'sm' | 'md' | 'lg' | 'xl' | 'full';
  closeOnOverlayClick?: boolean;
  closeOnEscape?: boolean;
  showCloseButton?: boolean;
  children: React.ReactNode;
  className?: string;
}

const sizeClasses = {
  sm: 'max-w-sm',
  md: 'max-w-md',
  lg: 'max-w-lg',
  xl: 'max-w-xl',
  full: 'max-w-full mx-4'
};

export const Modal: React.FC<ModalProps> = ({
  isOpen,
  onClose,
  title,
  description,
  size = 'md',
  closeOnOverlayClick = true,
  closeOnEscape = true,
  showCloseButton = true,
  children,
  className
}) => {
  // é”å®šbodyæ»šåŠ¨
  useEffect(() => {
    if (isOpen) {
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = 'unset';
    }
    
    return () => {
      document.body.style.overflow = 'unset';
    };
  }, [isOpen]);

  // ESCé”®å…³é—­
  useEffect(() => {
    if (!isOpen || !closeOnEscape) return;

    const handleEscape = (event: KeyboardEvent) => {
      if (event.key === 'Escape') {
        onClose();
      }
    };

    document.addEventListener('keydown', handleEscape);
    return () => document.removeEventListener('keydown', handleEscape);
  }, [isOpen, onClose, closeOnEscape]);

  if (!isOpen) return null;

  const modalContent = (
    <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
      {/* èƒŒæ™¯é®ç½© */}
      <div 
        className="absolute inset-0 bg-black bg-opacity-50 transition-opacity"
        onClick={closeOnOverlayClick ? onClose : undefined}
        aria-hidden="true"
      />
      
      {/* æ¨¡æ€æ¡†å†…å®¹ */}
      <div 
        className={cn(
          'relative w-full bg-white rounded-lg shadow-xl transition-all',
          'animate-in fade-in-0 zoom-in-95 duration-200',
          sizeClasses[size],
          className
        )}
        role="dialog"
        aria-modal="true"
        aria-labelledby={title ? 'modal-title' : undefined}
        aria-describedby={description ? 'modal-description' : undefined}
      >
        {/* å¤´éƒ¨ */}
        {(title || showCloseButton) && (
          <div className="flex items-center justify-between p-6 border-b border-neutral-200">
            <div>
              {title && (
                <h2 id="modal-title" className="text-lg font-semibold text-neutral-900">
                  {title}
                </h2>
                {description && (
                  <p id="modal-description" className="mt-1 text-sm text-neutral-600">
                    {description}
                  </p>
                )}
              </div>
              
              {showCloseButton && (
                <button
                  onClick={onClose}
                  className="ml-4 p-2 text-neutral-400 hover:text-neutral-600 rounded-md hover:bg-neutral-100 transition-colors"
                  aria-label="å…³é—­æ¨¡æ€æ¡†"
                >
                  <X size={20} />
                </button>
              )}
            </div>
          </div>
        )}
        
        {/* å†…å®¹ */}
        <div className="p-6">
          {children}
        </div>
      </div>
    </div>
  );

  // ä½¿ç”¨Portalæ¸²æŸ“åˆ°body
  return createPortal(modalContent, document.body);
};
```

### 4. é‚®ä»¶å¡ç‰‡ç»„ä»¶ (EmailCard)

#### è®¾è®¡è§„èŒƒ
```tsx
// components/email/EmailCard.tsx
import React from 'react';
import { formatDistanceToNow } from 'date-fns';
import { zhCN } from 'date-fns/locale';
import { 
  Mail, 
  MailOpen, 
  AlertCircle, 
  Clock, 
  Paperclip,
  MoreHorizontal,
  Star,
  Archive,
  Trash2
} from 'lucide-react';
import { cn } from '@/lib/utils';

interface EmailData {
  id: string;
  subject: string;
  senderEmail: string;
  senderName?: string;
  recipients: {
    to: string[];
    cc?: string[];
    bcc?: string[];
  };
  body: string;
  isRead: boolean;
  isStarred: boolean;
  status: 'draft' | 'sent' | 'delivered' | 'read' | 'failed' | 'bounced';
  category: 'general' | 'notification' | 'marketing' | 'transactional' | 'system';
  priority: 'low' | 'normal' | 'high' | 'urgent';
  sentAt?: Date;
  readAt?: Date;
  hasAttachments: boolean;
  attachmentCount: number;
  threadId?: string;
  createdAt: Date;
}

interface EmailCardProps {
  email: EmailData;
  isSelected?: boolean;
  onSelect?: (emailId: string, selected: boolean) => void;
  onRead?: (emailId: string) => void;
  onStar?: (emailId: string, starred: boolean) => void;
  onArchive?: (emailId: string) => void;
  onDelete?: (emailId: string) => void;
  onReply?: (emailId: string) => void;
  onForward?: (emailId: string) => void;
  showActions?: boolean;
  className?: string;
}

const statusConfig = {
  draft: {
    icon: Clock,
    color: 'text-neutral-500',
    bgColor: 'bg-neutral-100',
    label: 'è‰ç¨¿'
  },
  sent: {
    icon: Mail,
    color: 'text-primary-500',
    bgColor: 'bg-primary-100',
    label: 'å·²å‘é€'
  },
  delivered: {
    icon: Mail,
    color: 'text-success-500',
    bgColor: 'bg-success-100',
    label: 'å·²æŠ•é€’'
  },
  read: {
    icon: MailOpen,
    color: 'text-success-600',
    bgColor: 'bg-success-100',
    label: 'å·²è¯»'
  },
  failed: {
    icon: AlertCircle,
    color: 'text-error-500',
    bgColor: 'bg-error-100',
    label: 'å‘é€å¤±è´¥'
  },
  bounced: {
    icon: AlertCircle,
    color: 'text-warning-500',
    bgColor: 'bg-warning-100',
    label: 'é€€ä¿¡'
  }
};

const priorityConfig = {
  low: {
    color: 'text-neutral-500',
    label: 'ä½'
  },
  normal: {
    color: 'text-primary-500',
    label: 'æ™®é€š'
  },
  high: {
    color: 'text-warning-500',
    label: 'é«˜'
  },
  urgent: {
    color: 'text-error-500',
    label: 'ç´§æ€¥'
  }
};

const categoryConfig = {
  general: { label: 'ä¸€èˆ¬', color: 'text-neutral-600' },
  notification: { label: 'é€šçŸ¥', color: 'text-blue-600' },
  marketing: { label: 'è¥é”€', color: 'text-purple-600' },
  transactional: { label: 'äº¤æ˜“', color: 'text-green-600' },
  system: { label: 'ç³»ç»Ÿ', color: 'text-orange-600' }
};

export const EmailCard: React.FC<EmailCardProps> = ({
  email,
  isSelected = false,
  onSelect,
  onRead,
  onStar,
  onArchive,
  onDelete,
  onReply,
  onForward,
  showActions = true,
  className
}) => {
  const statusInfo = statusConfig[email.status];
  const priorityInfo = priorityConfig[email.priority];
  const categoryInfo = categoryConfig[email.category];
  
  const StatusIcon = statusInfo.icon;
  
  const handleCardClick = () => {
    if (!email.isRead && onRead) {
      onRead(email.id);
    }
  };
  
  const formatEmailAddress = (email: string, name?: string) => {
    return name ? `${name} <${email}>` : email;
  };
  
  return (
    <div 
      className={cn(
        'bg-white border border-neutral-200 rounded-lg p-4 transition-all duration-200',
        'hover:shadow-md hover:border-neutral-300',
        isSelected && 'ring-2 ring-primary-500 border-primary-300',
        !email.isRead && 'bg-primary-50/50 border-l-4 border-l-primary-500',
        email.status === 'failed' && 'border-l-4 border-l-error-500',
        email.status === 'bounced' && 'border-l-4 border-l-warning-500',
        className
      )}
      onClick={handleCardClick}
    >
      {/* å¤´éƒ¨æ“ä½œæ  */}
      <div className="flex items-center justify-between mb-3">
        <div className="flex items-center space-x-3">
          <input
            type="checkbox"
            checked={isSelected}
            onChange={(e) => onSelect?.(email.id, e.target.checked)}
            onClick={(e) => e.stopPropagation()}
            className="w-4 h-4 text-primary-600 border-neutral-300 rounded focus:ring-primary-500"
          />
          
          <button
            onClick={(e) => {
              e.stopPropagation();
              onStar?.(email.id, !email.isStarred);
            }}
            className={cn(
              'p-1 rounded-md transition-colors',
              email.isStarred 
                ? 'text-warning-500 hover:text-warning-600' 
                : 'text-neutral-400 hover:text-warning-500'
            )}
          >
            <Star size={16} fill={email.isStarred ? 'currentColor' : 'none'} />
          </button>
          
          <div className="flex items-center space-x-2">
            <StatusIcon size={16} className={statusInfo.color} />
            <span className={cn('text-xs px-2 py-1 rounded-full', statusInfo.bgColor, statusInfo.color)}>
              {statusInfo.label}
            </span>
            
            <span className={cn('text-xs px-2 py-1 rounded-full bg-neutral-100', priorityInfo.color)}>
              {priorityInfo.label}
            </span>
            
            <span className={cn('text-xs px-2 py-1 rounded-full bg-neutral-100', categoryInfo.color)}>
              {categoryInfo.label}
            </span>
          </div>
        </div>
        
        {showActions && (
          <div className="flex items-center space-x-1">
            <button
              onClick={(e) => {
                e.stopPropagation();
                onReply?.(email.id);
              }}
              className="p-2 text-neutral-400 hover:text-primary-600 hover:bg-primary-50 rounded-md transition-colors"
              title="å›å¤"
            >
              <Mail size={16} />
            </button>
            
            <div className="relative">
              <button
                onClick={(e) => e.stopPropagation()}
                className="p-2 text-neutral-400 hover:text-neutral-600 hover:bg-neutral-50 rounded-md transition-colors"
                title="æ›´å¤šæ“ä½œ"
              >
                <MoreHorizontal size={16} />
              </button>
            </div>
          </div>
        )}
      </div>
      
      {/* é‚®ä»¶å†…å®¹ */}
      <div className="space-y-2">
        {/* å‘ä»¶äººå’Œä¸»é¢˜ */}
        <div className="flex items-start justify-between">
          <div className="flex-1 min-w-0">
            <div className="flex items-center space-x-2 mb-1">
              <h3 className={cn(
                'text-sm font-medium truncate',
                !email.isRead ? 'text-neutral-900' : 'text-neutral-700'
              )}>
                {formatEmailAddress(email.senderEmail, email.senderName)}
              </h3>
              
              {email.hasAttachments && (
                <div className="flex items-center text-neutral-400">
                  <Paperclip size={14} />
                  <span className="text-xs ml-1">{email.attachmentCount}</span>
                </div>
              )}
            </div>
            
            <h4 className={cn(
              'text-base font-semibold truncate',
              !email.isRead ? 'text-neutral-900' : 'text-neutral-700'
            )}>
              {email.subject || '(æ— ä¸»é¢˜)'}
            </h4>
          </div>
          
          <div className="text-xs text-neutral-500 whitespace-nowrap ml-4">
            {email.sentAt ? (
              formatDistanceToNow(email.sentAt, { 
                addSuffix: true,
                locale: zhCN 
              })
            ) : (
              formatDistanceToNow(email.createdAt, { 
                addSuffix: true,
                locale: zhCN 
              })
            )}
          </div>
        </div>
        
        {/* é‚®ä»¶é¢„è§ˆ */}
        <p className="text-sm text-neutral-600 line-clamp-2">
          {email.body.replace(/<[^>]*>/g, '').substring(0, 150)}
          {email.body.length > 150 && '...'}
        </p>
        
        {/* æ”¶ä»¶äººä¿¡æ¯ */}
        <div className="flex items-center text-xs text-neutral-500">
          <span>æ”¶ä»¶äººï¼š</span>
          <span className="ml-1">
            {email.recipients.to.map(recipient => {
              const [name, emailAddr] = recipient.split(' <');
              return name || emailAddr;
            }).join(', ')}
          </span>
          {email.recipients.cc && email.recipients.cc.length > 0 && (
            <span className="ml-2">
              æŠ„é€ï¼š{email.recipients.cc.length}äºº
            </span>
          )}
        </div>
      </div>
    </div>
  );
};
```

## ğŸ“± å“åº”å¼è®¾è®¡

### æ–­ç‚¹ç³»ç»Ÿ
```typescript
// config/breakpoints.ts
export const breakpoints = {
  sm: '640px',   // å°å±è®¾å¤‡
  md: '768px',   // ä¸­ç­‰å±å¹•
  lg: '1024px',  // å¤§å±å¹•
  xl: '1280px',  // è¶…å¤§å±å¹•
  '2xl': '1536px' // 2Kå±å¹•
} as const;

export const mediaQueries = {
  sm: `@media (min-width: ${breakpoints.sm})`,
  md: `@media (min-width: ${breakpoints.md})`,
  lg: `@media (min-width: ${breakpoints.lg})`,
  xl: `@media (min-width: ${breakpoints.xl})`,
  '2xl': `@media (min-width: ${breakpoints['2xl']})`
} as const;

// ä½¿ç”¨ç¤ºä¾‹
const responsiveStyles = `
  /* ç§»åŠ¨ç«¯ä¼˜å…ˆ */
  .container {
    width: 100%;
    padding: 16px;
    
    ${mediaQueries.sm} {
      padding: 24px;
    }
    
    ${mediaQueries.lg} {
      padding: 32px;
      max-width: 1024px;
      margin: 0 auto;
    }
  }
`;
```

### å“åº”å¼é‚®ä»¶åˆ—è¡¨ç»„ä»¶
```tsx
// components/email/EmailList.tsx
import React from 'react';
import { useMediaQuery } from '@/hooks/useMediaQuery';
import { cn } from '@/lib/utils';

interface EmailListProps {
  emails: EmailData[];
  selectedEmails: string[];
  onSelectEmail: (emailId: string, selected: boolean) => void;
  onSelectAll: (selected: boolean) => void;
  onEmailClick: (email: EmailData) => void;
  className?: string;
}

export const EmailList: React.FC<EmailListProps> = ({
  emails,
  selectedEmails,
  onSelectEmail,
  onSelectAll,
  onEmailClick,
  className
}) => {
  const isMobile = useMediaQuery('(max-width: 768px)');
  const isTablet = useMediaQuery('(max-width: 1024px)');
  
  if (isMobile) {
    return (
      <div className={cn('space-y-2', className)}>
        {/* å…¨é€‰æ§åˆ¶ */}
        <div className="flex items-center justify-between p-3 bg-neutral-50 border-b">
          <label className="flex items-center space-x-2">
            <input
              type="checkbox"
              checked={selectedEmails.length === emails.length}
              onChange={(e) => onSelectAll(e.target.checked)}
              className="w-4 h-4 text-primary-600 border-neutral-300 rounded focus:ring-primary-500"
            />
            <span className="text-sm text-neutral-700">
              {selectedEmails.length > 0 ? `å·²é€‰æ‹© ${selectedEmails.length} å°` : 'å…¨é€‰'}
            </span>
          </label>
        </div>
        
        {/* ç§»åŠ¨ç«¯é‚®ä»¶åˆ—è¡¨ */}
        <div className="space-y-2">
          {emails.map((email) => (
            <div
              key={email.id}
              className={cn(
                'bg-white border border-neutral-200 rounded-lg p-4',
                'hover:shadow-sm transition-shadow cursor-pointer',
                selectedEmails.includes(email.id) && 'ring-2 ring-primary-500'
              )}
              onClick={() => onEmailClick(email)}
            >
              <div className="flex items-start justify-between">
                <div className="flex-1 min-w-0">
                  <div className="flex items-center space-x-2 mb-1">
                    <input
                      type="checkbox"
                      checked={selectedEmails.includes(email.id)}
                      onChange={(e) => onSelectEmail(email.id, e.target.checked)}
                      onClick={(e) => e.stopPropagation()}
                      className="w-4 h-4 text-primary-600 border-neutral-300 rounded focus:ring-primary-500"
                    />
                    <h3 className={cn(
                      'text-sm font-medium truncate',
                      !email.isRead ? 'text-neutral-900' : 'text-neutral-600'
                    )}>
                      {email.senderEmail}
                    </h3>
                  </div>
                  
                  <h4 className={cn(
                    'text-base font-semibold truncate mb-2',
                    !email.isRead ? 'text-neutral-900' : 'text-neutral-700'
                  )}>
                    {email.subject || '(æ— ä¸»é¢˜)'}
                  </h4>
                  
                  <p className="text-sm text-neutral-600 line-clamp-2">
                    {email.body.replace(/<[^>]*>/g, '').substring(0, 100)}
                    {email.body.length > 100 && '...'}
                  </p>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    );
  }
  
  if (isTablet) {
    return (
      <div className={cn('bg-white border border-neutral-200 rounded-lg overflow-hidden', className)}>
        {/* å¹³æ¿ç«¯å¤´éƒ¨ */}
        <div className="flex items-center justify-between p-4 bg-neutral-50 border-b">
          <label className="flex items-center space-x-2">
            <input
              type="checkbox"
              checked={selectedEmails.length === emails.length}
              onChange={(e) => onSelectAll(e.target.checked)}
              className="w-4 h-4 text-primary-600 border-neutral-300 rounded focus:ring-primary-500"
            />
            <span className="text-sm text-neutral-700">
              {selectedEmails.length > 0 ? `å·²é€‰æ‹© ${selectedEmails.length} å°` : 'å…¨é€‰'}
            </span>
          </label>
        </div>
        
        {/* å¹³æ¿ç«¯é‚®ä»¶åˆ—è¡¨ */}
        <div className="divide-y divide-neutral-200">
          {emails.map((email) => (
            <EmailCard
              key={email.id}
              email={email}
              isSelected={selectedEmails.includes(email.id)}
              onSelect={onSelectEmail}
              onRead={(emailId) => onEmailClick({ id: emailId } as EmailData)}
              className="border-0 rounded-none hover:bg-neutral-50"
            />
          ))}
        </div>
      </div>
    );
  }
  
  // æ¡Œé¢ç«¯å®Œæ•´è§†å›¾
  return (
    <div className={cn('bg-white border border-neutral-200 rounded-lg overflow-hidden', className)}>
      {/* æ¡Œé¢ç«¯å¤´éƒ¨ */}
      <div className="flex items-center justify-between p-4 bg-neutral-50 border-b">
        <label className="flex items-center space-x-2">
          <input
            type="checkbox"
            checked={selectedEmails.length === emails.length}
            onChange={(e) => onSelectAll(e.target.checked)}
            className="w-4 h-4 text-primary-600 border-neutral-300 rounded focus:ring-primary-500"
          />
          <span className="text-sm text-neutral-700">
            {selectedEmails.length > 0 ? `å·²é€‰æ‹© ${selectedEmails.length} å°` : 'å…¨é€‰'}
          </span>
        </label>
        
        <div className="text-sm text-neutral-500">
          å…± {emails.length} å°é‚®ä»¶
        </div>
      </div>
      
      {/* æ¡Œé¢ç«¯é‚®ä»¶åˆ—è¡¨ */}
      <div className="divide-y divide-neutral-200">
        {emails.map((email) => (
          <EmailCard
            key={email.id}
            email={email}
            isSelected={selectedEmails.includes(email.id)}
            onSelect={onSelectEmail}
            onRead={(emailId) => onEmailClick({ id: emailId } as EmailData)}
            className="border-0 rounded-none hover:bg-neutral-50"
          />
        ))}
      </div>
    </div>
  );
};
```

## â™¿ å¯è®¿é—®æ€§è®¾è®¡

### ARIAå±æ€§è§„èŒƒ
```tsx
// components/ui/AccessibleButton.tsx
import React from 'react';
import { cn } from '@/lib/utils';

interface AccessibleButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'danger';
  size?: 'sm' | 'md' | 'lg';
  loading?: boolean;
  children: React.ReactNode;
}

export const AccessibleButton: React.FC<AccessibleButtonProps> = ({
  variant = 'primary',
  size = 'md',
  loading = false,
  disabled,
  children,
  className,
  ...props
}) => {
  return (
    <button
      className={cn(
        // åŸºç¡€æ ·å¼
        'inline-flex items-center justify-center rounded-md font-medium transition-colors',
        'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2',
        'disabled:pointer-events-none disabled:opacity-50',
        
        // å˜ä½“æ ·å¼
        {
          'bg-primary-600 text-white hover:bg-primary-700 focus-visible:ring-primary-500': variant === 'primary',
          'bg-neutral-100 text-neutral-900 hover:bg-neutral-200 focus-visible:ring-neutral-500': variant === 'secondary',
          'bg-error-600 text-white hover:bg-error-700 focus-visible:ring-error-500': variant === 'danger'
        },
        
        // å°ºå¯¸æ ·å¼
        {
          'h-8 px-3 text-xs': size === 'sm',
          'h-10 px-4 py-2 text-sm': size === 'md',
          'h-12 px-6 py-3 text-base': size === 'lg'
        },
        
        className
      )}
      disabled={disabled || loading}
      aria-disabled={disabled || loading}
      aria-busy={loading}
      {...props}
    >
      {loading && (
        <svg
          className="animate-spin -ml-1 mr-2 h-4 w-4"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          aria-hidden="true"
        >
          <circle
            className="opacity-25"
            cx="12"
            cy="12"
            r="10"
            stroke="currentColor"
            strokeWidth="4"
          />
          <path
            className="opacity-75"
            fill="currentColor"
            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
          />
        </svg>
      )}
      <span>{children}</span>
    </button>
  );
};
```

### é”®ç›˜å¯¼èˆªæ”¯æŒ
```tsx
// hooks/useKeyboardNavigation.ts
import { useEffect } from 'react';

interface KeyboardNavigationOptions {
  enabled?: boolean;
  trapFocus?: boolean;
  onEscape?: () => void;
  onArrowUp?: () => void;
  onArrowDown?: () => void;
  onArrowLeft?: () => void;
  onArrowRight?: () => void;
  onEnter?: () => void;
  onTab?: () => void;
}

export const useKeyboardNavigation = (options: KeyboardNavigationOptions) => {
  const {
    enabled = true,
    trapFocus = false,
    onEscape,
    onArrowUp,
    onArrowDown,
    onArrowLeft,
    onArrowRight,
    onEnter,
    onTab
  } = options;

  useEffect(() => {
    if (!enabled) return;

    const handleKeyDown = (event: KeyboardEvent) => {
      switch (event.key) {
        case 'Escape':
          onEscape?.();
          break;
        case 'ArrowUp':
          event.preventDefault();
          onArrowUp?.();
          break;
        case 'ArrowDown':
          event.preventDefault();
          onArrowDown?.();
          break;
        case 'ArrowLeft':
          event.preventDefault();
          onArrowLeft?.();
          break;
        case 'ArrowRight':
          event.preventDefault();
          onArrowRight?.();
          break;
        case 'Enter':
          onEnter?.();
          break;
        case 'Tab':
          onTab?.();
          break;
      }
    };

    document.addEventListener('keydown', handleKeyDown);
    
    return () => {
      document.removeEventListener('keydown', handleKeyDown);
    };
  }, [enabled, onEscape, onArrowUp, onArrowDown, onArrowLeft, onArrowRight, onEnter, onTab]);

  // ç„¦ç‚¹é™·é˜±å®ç°
  useEffect(() => {
    if (!trapFocus) return;

    const trapFocusHandler = (event: KeyboardEvent) => {
      if (event.key !== 'Tab') return;

      const focusableElements = document.querySelectorAll(
        'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
      ) as NodeListOf<HTMLElement>;

      const firstElement = focusableElements[0];
      const lastElement = focusableElements[focusableElements.length - 1];

      if (event.shiftKey) {
        if (document.activeElement === firstElement) {
          event.preventDefault();
          lastElement.focus();
        }
      } else {
        if (document.activeElement === lastElement) {
          event.preventDefault();
          firstElement.focus();
        }
      }
    };

    document.addEventListener('keydown', trapFocusHandler);
    
    return () => {
      document.removeEventListener('keydown', trapFocusHandler);
    };
  }, [trapFocus]);
};
```

## ğŸ­ åŠ¨ç”»ä¸äº¤äº’æ•ˆæœ

### é¡µé¢è½¬åœºåŠ¨ç”»
```tsx
// components/animation/PageTransition.tsx
import React from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { useRouter } from 'next/router';

const pageVariants = {
  initial: {
    opacity: 0,
    x: -200,
  },
  in: {
    opacity: 1,
    x: 0,
  },
  out: {
    opacity: 0,
    x: 200,
  },
};

const pageTransition = {
  type: 'tween',
  ease: 'anticipate',
  duration: 0.4,
};

interface PageTransitionProps {
  children: React.ReactNode;
  className?: string;
}

export const PageTransition: React.FC<PageTransitionProps> = ({ 
  children, 
  className 
}) => {
  const router = useRouter();

  return (
    <div className={className}>
      <AnimatePresence mode="wait" initial={false}>
        <motion.div
          key={router.route}
          initial="initial"
          animate="in"
          exit="out"
          variants={pageVariants}
          transition={pageTransition}
        >
          {children}
        </motion.div>
      </AnimatePresence>
    </div>
  );
};
```

### éª¨æ¶å±åŠ è½½åŠ¨ç”»
```tsx
// components/loading/SkeletonLoader.tsx
import React from 'react';
import { cn } from '@/lib/utils';

interface SkeletonProps {
  className?: string;
  lines?: number;
  width?: string | number;
  height?: string | number;
  rounded?: boolean;
}

export const Skeleton: React.FC<SkeletonProps> = ({
  className,
  lines = 1,
  width,
  height,
  rounded = false
}) => {
  if (lines === 1) {
    return (
      <div
        className={cn(
          'animate-pulse bg-neutral-200 rounded',
          rounded && 'rounded-md',
          className
        )}
        style={{
          width: width || '100%',
          height: height || '1rem'
        }}
      />
    );
  }

  return (
    <div className="space-y-2">
      {Array.from({ length: lines }).map((_, index) => (
        <div
          key={index}
          className={cn(
            'animate-pulse bg-neutral-200 rounded',
            index === lines - 1 && 'w-3/4',
            rounded && 'rounded-md',
            className
          )}
          style={{
            width: index === lines - 1 ? '75%' : (width || '100%'),
            height: height || '1rem'
          }}
        />
      ))}
    </div>
  );
};

// é‚®ä»¶å¡ç‰‡éª¨æ¶å±
export const EmailCardSkeleton: React.FC = () => {
  return (
    <div className="bg-white border border-neutral-200 rounded-lg p-4 animate-pulse">
      {/* å¤´éƒ¨æ“ä½œæ  */}
      <div className="flex items-center justify-between mb-3">
        <div className="flex items-center space-x-3">
          <div className="w-4 h-4 bg-neutral-200 rounded" />
          <div className="w-4 h-4 bg-neutral-200 rounded" />
          <div className="flex space-x-2">
            <div className="w-12 h-5 bg-neutral-200 rounded-full" />
            <div className="w-8 h-5 bg-neutral-200 rounded-full" />
            <div className="w-8 h-5 bg-neutral-200 rounded-full" />
          </div>
        </div>
      </div>
      
      {/* é‚®ä»¶å†…å®¹ */}
      <div className="space-y-2">
        <div className="flex justify-between">
          <div className="flex-1 space-y-2">
            <Skeleton height="1rem" width="60%" />
            <Skeleton height="1.25rem" width="80%" />
          </div>
          <Skeleton height="1rem" width="3rem" />
        </div>
        <Skeleton lines={2} />
        <Skeleton height="0.875rem" width="50%" />
      </div>
    </div>
  );
};
```

## ğŸ“Š çŠ¶æ€ç®¡ç†ä¸æ€§èƒ½

### ZustandçŠ¶æ€ç®¡ç†
```typescript
// stores/emailStore.ts
import { create } from 'zustand';
import { devtools, persist } from 'zustand/middleware';

interface EmailFilters {
  status?: string[];
  category?: string[];
  sender?: string[];
  dateRange?: {
    start: Date;
    end: Date;
  };
  searchQuery?: string;
}

interface EmailStore {
  // çŠ¶æ€
  emails: EmailData[];
  selectedEmails: string[];
  filters: EmailFilters;
  isLoading: boolean;
  error: string | null;
  currentEmail: EmailData | null;
  
  // è§†å›¾çŠ¶æ€
  viewMode: 'list' | 'grid' | 'compact';
  sortBy: 'createdAt' | 'sentAt' | 'subject' | 'sender';
  sortOrder: 'asc' | 'desc';
  
  // æ“ä½œ
  setEmails: (emails: EmailData[]) => void;
  addEmail: (email: EmailData) => void;
  updateEmail: (emailId: string, updates: Partial<EmailData>) => void;
  deleteEmail: (emailId: string) => void;
  setSelectedEmails: (emailIds: string[]) => void;
  toggleEmailSelection: (emailId: string) => void;
  selectAllEmails: () => void;
  clearSelection: () => void;
  
  // è¿‡æ»¤å™¨æ“ä½œ
  setFilters: (filters: Partial<EmailFilters>) => void;
  clearFilters: () => void;
  
  // è§†å›¾æ“ä½œ
  setViewMode: (mode: 'list' | 'grid' | 'compact') => void;
  setSorting: (sortBy: string, order: 'asc' | 'desc') => void;
  
  // åŠ è½½çŠ¶æ€
  setLoading: (loading: boolean) => void;
  setError: (error: string | null) => void;
  
  // å½“å‰é‚®ä»¶
  setCurrentEmail: (email: EmailData | null) => void;
}

export const useEmailStore = create<EmailStore>()(
  devtools(
    persist(
      (set, get) => ({
        // åˆå§‹çŠ¶æ€
        emails: [],
        selectedEmails: [],
        filters: {},
        isLoading: false,
        error: null,
        currentEmail: null,
        viewMode: 'list',
        sortBy: 'createdAt',
        sortOrder: 'desc',
        
        // é‚®ä»¶æ“ä½œ
        setEmails: (emails) => set({ emails }),
        
        addEmail: (email) => set((state) => ({
          emails: [email, ...state.emails]
        })),
        
        updateEmail: (emailId, updates) => set((state) => ({
          emails: state.emails.map(email => 
            email.id === emailId ? { ...email, ...updates } : email
          )
        })),
        
        deleteEmail: (emailId) => set((state) => ({
          emails: state.emails.filter(email => email.id !== emailId),
          selectedEmails: state.selectedEmails.filter(id => id !== emailId)
        })),
        
        // é€‰æ‹©æ“ä½œ
        setSelectedEmails: (emailIds) => set({ selectedEmails: emailIds }),
        
        toggleEmailSelection: (emailId) => set((state) => ({
          selectedEmails: state.selectedEmails.includes(emailId)
            ? state.selectedEmails.filter(id => id !== emailId)
            : [...state.selectedEmails, emailId]
        })),
        
        selectAllEmails: () => set((state) => ({
          selectedEmails: state.emails.map(email => email.id)
        })),
        
        clearSelection: () => set({ selectedEmails: [] }),
        
        // è¿‡æ»¤å™¨æ“ä½œ
        setFilters: (newFilters) => set((state) => ({
          filters: { ...state.filters, ...newFilters }
        })),
        
        clearFilters: () => set({ filters: {} }),
        
        // è§†å›¾æ“ä½œ
        setViewMode: (mode) => set({ viewMode: mode }),
        setSorting: (sortBy, order) => set({ sortBy, sortOrder: order }),
        
        // åŠ è½½çŠ¶æ€
        setLoading: (loading) => set({ isLoading: loading }),
        setError: (error) => set({ error }),
        
        // å½“å‰é‚®ä»¶
        setCurrentEmail: (email) => set({ currentEmail: email })
      }),
      {
        name: 'email-store',
        partialize: (state) => ({
          viewMode: state.viewMode,
          sortBy: state.sortBy,
          sortOrder: state.sortOrder,
          filters: state.filters
        })
      }
    ),
    { name: 'email-store' }
  )
);
```

### React Queryç¼“å­˜ç®¡ç†
```typescript
// hooks/useEmails.ts
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { emailApi } from '@/services/emailApi';
import { useEmailStore } from '@/stores/emailStore';

export const useEmails = (filters?: EmailFilters) => {
  const queryClient = useQueryClient();
  const { setEmails, setLoading, setError } = useEmailStore();
  
  const query = useQuery({
    queryKey: ['emails', filters],
    queryFn: () => emailApi.getEmails(filters),
    staleTime: 5 * 60 * 1000, // 5åˆ†é’Ÿ
    gcTime: 10 * 60 * 1000,   // 10åˆ†é’Ÿ
    retry: 3,
    retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),
    onSuccess: (data) => {
      setEmails(data.emails);
      setLoading(false);
    },
    onError: (error) => {
      setError(error.message);
      setLoading(false);
    }
  });
  
  // é‚®ä»¶æ“ä½œMutation
  const sendEmailMutation = useMutation({
    mutationFn: emailApi.sendEmail,
    onMutate: () => {
      setLoading(true);
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['emails'] });
    },
    onError: (error) => {
      setError(error.message);
    },
    onSettled: () => {
      setLoading(false);
    }
  });
  
  const updateEmailMutation = useMutation({
    mutationFn: ({ emailId, updates }: { emailId: string; updates: Partial<EmailData> }) =>
      emailApi.updateEmail(emailId, updates),
    onMutate: async ({ emailId, updates }) => {
      // ä¹è§‚æ›´æ–°
      await queryClient.cancelQueries({ queryKey: ['emails'] });
      
      const previousEmails = queryClient.getQueryData(['emails']);
      
      queryClient.setQueryData(['emails'], (old: any) => 
        old?.emails?.map((email: EmailData) => 
          email.id === emailId ? { ...email, ...updates } : email
        )
      );
      
      return { previousEmails };
    },
    onError: (error, { emailId }, context) => {
      // å›æ»šåˆ°ä¹è§‚æ›´æ–°å‰çš„çŠ¶æ€
      if (context?.previousEmails) {
        queryClient.setQueryData(['emails'], context.previousEmails);
      }
    },
    onSettled: () => {
      queryClient.invalidateQueries({ queryKey: ['emails'] });
    }
  });
  
  const deleteEmailMutation = useMutation({
    mutationFn: emailApi.deleteEmail,
    onMutate: async (emailId) => {
      await queryClient.cancelQueries({ queryKey: ['emails'] });
      
      const previousEmails = queryClient.getQueryData(['emails']);
      
      queryClient.setQueryData(['emails'], (old: any) =>
        old?.emails?.filter((email: EmailData) => email.id !== emailId)
      );
      
      return { previousEmails };
    },
    onError: (error, emailId, context) => {
      if (context?.previousEmails) {
        queryClient.setQueryData(['emails'], context.previousEmails);
      }
    },
    onSettled: () => {
      queryClient.invalidateQueries({ queryKey: ['emails'] });
    }
  });
  
  return {
    // æŸ¥è¯¢ç»“æœ
    emails: query.data?.emails || [],
    isLoading: query.isLoading,
    isError: query.isError,
    error: query.error,
    refetch: query.refetch,
    
    // çªå˜
    sendEmail: sendEmailMutation.mutate,
    updateEmail: updateEmailMutation.mutate,
    deleteEmail: deleteEmailMutation.mutate,
    
    // çŠ¶æ€
    isSending: sendEmailMutation.isLoading,
    isUpdating: updateEmailMutation.isLoading,
    isDeleting: deleteEmailMutation.isLoading
  };
};
```

## ğŸ”§ å¼€å‘å·¥å…·ä¸è§„èŒƒ

### ESLinté…ç½®
```json
// .eslintrc.json
{
  "extends": [
    "next/core-web-vitals",
    "@typescript-eslint/recommended",
    "plugin:react/recommended",
    "plugin:react-hooks/recommended",
    "plugin:jsx-a11y/recommended",
    "prettier"
  ],
  "plugins": [
    "@typescript-eslint",
    "react",
    "react-hooks",
    "jsx-a11y",
    "import"
  ],
  "rules": {
    // TypeScriptè§„åˆ™
    "@typescript-eslint/no-unused-vars": "error",
    "@typescript-eslint/no-explicit-any": "warn",
    "@typescript-eslint/explicit-function-return-type": "off",
    "@typescript-eslint/explicit-module-boundary-types": "off",
    
    // Reactè§„åˆ™
    "react/react-in-jsx-scope": "off",
    "react/prop-types": "off",
    "react/display-name": "error",
    "react-hooks/rules-of-hooks": "error",
    "react-hooks/exhaustive-deps": "warn",
    
    // å¯è®¿é—®æ€§è§„åˆ™
    "jsx-a11y/alt-text": "error",
    "jsx-a11y/anchor-has-content": "error",
    "jsx-a11y/aria-role": "error",
    "jsx-a11y/aria-props": "error",
    "jsx-a11y/aria-proptypes": "error",
    "jsx-a11y/role-has-required-aria-props": "error",
    "jsx-a11y/role-supports-aria-props": "error",
    
    // Importè§„åˆ™
    "import/order": [
      "error",
      {
        "groups": [
          "builtin",
          "external",
          "internal",
          "parent",
          "sibling",
          "index"
        ],
        "newlines-between": "always",
        "alphabetize": {
          "order": "asc",
          "caseInsensitive": true
        }
      }
    ]
  },
  "settings": {
    "react": {
      "version": "detect"
    },
    "import/resolver": {
      "typescript": {
        "alwaysTryTypes": true,
        "project": "./tsconfig.json"
      }
    }
  }
}
```

### Tailwind CSSé…ç½®
```typescript
// tailwind.config.js
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './pages/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
    './app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  darkMode: 'class',
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#eff6ff',
          100: '#dbeafe',
          200: '#bfdbfe',
          300: '#93c5fd',
          400: '#60a5fa',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8',
          800: '#1e40af',
          900: '#1e3a8a',
          950: '#172554'
        },
        neutral: {
          50: '#fafafa',
          100: '#f5f5f5',
          200: '#e5e5e5',
          300: '#d4d4d4',
          400: '#a3a3a3',
          500: '#737373',
          600: '#525252',
          700: '#404040',
          800: '#262626',
          900: '#171717',
          950: '#0a0a0a'
        }
      },
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif'],
        mono: ['JetBrains Mono', 'Consolas', 'monospace']
      },
      spacing: {
        '18': '4.5rem',
        '88': '22rem',
        '128': '32rem'
      },
      animation: {
        'fade-in': 'fadeIn 200ms ease-out',
        'fade-out': 'fadeOut 150ms ease-in',
        'slide-in': 'slideIn 300ms ease-out',
        'slide-out': 'slideOut 200ms ease-in',
        'scale-in': 'scaleIn 200ms ease-out',
        'scale-out': 'scaleOut 150ms ease-in',
        'shimmer': 'shimmer 2s infinite'
      },
      keyframes: {
        fadeIn: {
          '0%': { opacity: '0' },
          '100%': { opacity: '1' }
        },
        fadeOut: {
          '0%': { opacity: '1' },
          '100%': { opacity: '0' }
        },
        slideIn: {
          '0%': { transform: 'translateY(-10px)', opacity: '0' },
          '100%': { transform: 'translateY(0)', opacity: '1' }
        },
        slideOut: {
          '0%': { transform: 'translateY(0)', opacity: '1' },
          '100%': { transform: 'translateY(-10px)', opacity: '0' }
        },
        shimmer: {
          '0%': { 'background-position': '-468px 0' },
          '100%': { 'background-position': '468px 0' }
        }
      },
      boxShadow: {
        'sm': '0 1px 2px 0 rgb(0 0 0 / 0.05)',
        'base': '0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)',
        'md': '0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)',
        'lg': '0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)',
        'modal': '0 25px 50px -12px rgb(0 0 0 / 0.25)'
      }
    },
  },
  plugins: [
    require('@tailwindcss/forms'),
    require('@tailwindcss/typography'),
    require('@tailwindcss/aspect-ratio'),
    require('@tailwindcss/line-clamp')
  ],
}
```

## ğŸ“± PWAæ”¯æŒ

### Service Workeré…ç½®
```typescript
// public/sw.js
const CACHE_NAME = '0379.email-v1';
const urlsToCache = [
  '/',
  '/static/js/bundle.js',
  '/static/css/main.css',
  '/offline.html'
];

self.addEventListener('install', (event) => {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then((cache) => cache.addAll(urlsToCache))
  );
});

self.addEventListener('fetch', (event) => {
  event.respondWith(
    caches.match(event.request)
      .then((response) => {
        // ç¼“å­˜å‘½ä¸­åˆ™è¿”å›ç¼“å­˜ï¼Œå¦åˆ™å‘é€ç½‘ç»œè¯·æ±‚
        if (response) {
          return response;
        }
        
        return fetch(event.request).then((response) => {
          // æ£€æŸ¥æ˜¯å¦æ¥æ”¶åˆ°æœ‰æ•ˆå“åº”
          if (!response || response.status !== 200 || response.type !== 'basic') {
            return response;
          }
          
          // å…‹éš†å“åº”ï¼Œå› ä¸ºå“åº”æµåªèƒ½ä½¿ç”¨ä¸€æ¬¡
          const responseToCache = response.clone();
          
          caches.open(CACHE_NAME)
            .then((cache) => {
              cache.put(event.request, responseToCache);
            });
          
          return response;
        }).catch(() => {
          // ç½‘ç»œå¤±è´¥æ—¶è¿”å›ç¦»çº¿é¡µé¢
          if (event.request.destination === 'document') {
            return caches.match('/offline.html');
          }
        });
      })
  );
});
```

### Web App Manifest
```json
// public/manifest.json
{
  "name": "YYCÂ³é‚®ä»¶å¹³å°",
  "short_name": "0379é‚®ä»¶",
  "description": "ä¸“ä¸šçš„é‚®ä»¶å‘é€ä¸ç®¡ç†å¹³å°",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#2563eb",
  "orientation": "portrait-primary",
  "categories": ["productivity", "business"],
  "lang": "zh-CN",
  "dir": "ltr",
  "icons": [
    {
      "src": "/icon-192.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "any maskable"
    },
    {
      "src": "/icon-512.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "any maskable"
    }
  ],
  "shortcuts": [
    {
      "name": "å‘é€é‚®ä»¶",
      "short_name": "å‘é€",
      "description": "å¿«é€Ÿå‘é€æ–°é‚®ä»¶",
      "url": "/compose",
      "icons": [{ "src": "/compose-icon.png", "sizes": "96x96" }]
    },
    {
      "name": "æ”¶ä»¶ç®±",
      "short_name": "æ”¶ä»¶ç®±",
      "description": "æŸ¥çœ‹æ”¶ä»¶ç®±",
      "url": "/inbox",
      "icons": [{ "src": "/inbox-icon.png", "sizes": "96x96" }]
    }
  ]
}
```

---

## ğŸ“‹ æ€»ç»“

å‰ç«¯ç•Œé¢è®¾è®¡è§„èŒƒä¸ºYYCÂ³é‚®ä»¶å¹³å°æä¾›äº†å®Œæ•´çš„è®¾è®¡ç³»ç»Ÿå’Œå¼€å‘æŒ‡å¯¼ã€‚é€šè¿‡ç»Ÿä¸€çš„Design Tokensã€ç»„ä»¶åº“ã€å“åº”å¼è®¾è®¡å’Œå¯è®¿é—®æ€§æ ‡å‡†ï¼Œç¡®ä¿äº§å“åœ¨å„ç§è®¾å¤‡ä¸Šéƒ½èƒ½æä¾›ä¸€è‡´çš„é«˜è´¨é‡ç”¨æˆ·ä½“éªŒã€‚

**è®¾è®¡äº®ç‚¹**:
- âœ… åŸºäºDesign Tokensçš„ç»Ÿä¸€è®¾è®¡ç³»ç»Ÿ
- âœ… å®Œæ•´çš„ç»„ä»¶åº“å’Œäº¤äº’è§„èŒƒ
- âœ… Mobile-firstå“åº”å¼è®¾è®¡
- âœ… WCAG 2.1 AAçº§å¯è®¿é—®æ€§æ”¯æŒ
- âœ… æµç•…çš„åŠ¨ç”»å’Œè½¬åœºæ•ˆæœ
- âœ… PWAåŸç”Ÿåº”ç”¨ä½“éªŒ
- âœ… å®Œå–„çš„å¼€å‘å·¥å…·é“¾

**æŒç»­æ”¹è¿›**:
- ğŸ”„ ç”¨æˆ·åé¦ˆé©±åŠ¨çš„ä½“éªŒä¼˜åŒ–
- ğŸ”„ æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–
- ğŸ”„ æ–°è®¾å¤‡é€‚é…å’Œå…¼å®¹æ€§æµ‹è¯•
- ğŸ”„ æ— éšœç¢åŠŸèƒ½æ‰©å±•

ä¿æŒä»£ç å¥åº·ï¼Œç¨³æ­¥å‰è¡Œï¼ ğŸŒ¹