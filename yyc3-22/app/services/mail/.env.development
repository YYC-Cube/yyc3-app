# YYC³ 企业级邮件平台 - 开发环境配置
# Environment: Development
# Local Domain: localhost:4000
# API: localhost:4000/api

# ===========================================
# 基础配置
# ===========================================
NODE_ENV=development
PORT=4000
DOMAIN=localhost:4000
API_DOMAIN=localhost:4000
MAIN_DOMAIN=localhost:3000

# 服务配置
SERVICE_NAME=YYC³ Enterprise Email Platform (Development)
VERSION=2.0.0
ENVIRONMENT=development

# ===========================================
# 数据库配置
# ===========================================
# PostgreSQL (连接到本地NAS数据库)
DB_TYPE=postgresql
DB_HOST=192.168.3.45
DB_PORT=5432
DB_NAME=yyc3_email
DB_USER=yyc3_email
DB_PASSWORD=yyc3_admin
DB_SSL=false
DB_POOL_MIN=1
DB_POOL_MAX=5
DB_TIMEOUT=30000

# Redis (连接到本地NAS)
REDIS_HOST=192.168.3.45
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=1
REDIS_CONNECT_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=2000

# ===========================================
# 邮件服务配置
# ===========================================
# 开发环境 SMTP (使用 Ethereal 测试)
SMTP_HOST=smtp.ethereal.email
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=dev@0379.love
SMTP_FROM_NAME=YYC³ Email Platform (Dev)

# 模拟邮件配置
MOCK_EMAIL_ENABLED=true
MOCK_EMAIL_SAVE_PATH=./mock-emails
MOCK_EMAIL_DISPLAY=true

# ===========================================
# 安全配置
# ===========================================
# JWT 配置 (开发环境)
JWT_SECRET=dev_jwt_secret_key_change_in_production
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# 密码加密 (开发环境降低复杂度)
BCRYPT_ROUNDS=8
PASSWORD_MIN_LENGTH=6
PASSWORD_REQUIRE_UPPERCASE=false
PASSWORD_REQUIRE_LOWERCASE=false
PASSWORD_REQUIRE_NUMBERS=false
PASSWORD_REQUIRE_SYMBOLS=false

# API 安全
API_KEY_HEADER=X-API-Key
API_KEY_PREFIX=dev_ymail_
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000

# CORS 配置 (开发环境宽松)
CORS_ORIGIN=http://localhost:3000,http://localhost:3001,http://localhost:4000
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-API-Key

# ===========================================
# 文件存储配置
# ===========================================
# 本地存储
UPLOAD_PATH=./uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx,txt

# ===========================================
# 日志配置
# ===========================================
LOG_LEVEL=debug
LOG_FILE_PATH=./logs
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5
LOG_DATE_PATTERN=YYYY-MM-DD
LOG_STRUCTURED=true

# 开发模式
LOG_TO_CONSOLE=true
COLORIZE_LOGS=true
PRETTY_PRINT=true

# ===========================================
# 监控配置
# ===========================================
# 健康检查
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=10000
HEALTH_CHECK_TIMEOUT=2000

# 开发监控
DEV_METRICS_ENABLED=true
DEV_METRICS_PORT=9465
REQUEST_LOGGING=true
SLOW_QUERY_LOG=true

# ===========================================
# 邮件队列配置
# ===========================================
# 内存队列 (开发环境)
QUEUE_TYPE=memory
QUEUE_DEFAULT_JOB_OPTIONS_REMOVE_ON_COMPLETE=10
QUEUE_DEFAULT_JOB_OPTIONS_REMOVE_ON_FAIL=5
QUEUE_DEFAULT_JOB_OPTIONS_ATTEMPTS=2
QUEUE_DEFAULT_JOB_OPTIONS_BACKOFF=fixed

# 邮件发送队列
EMAIL_QUEUE_NAME=email-sending-dev
EMAIL_CONCURRENCY=2
EMAIL_MAX_RETRY=2
EMAIL_RETRY_DELAY=5000

# ===========================================
# 企业功能配置
# ===========================================
# 用户管理 (开发环境限制)
USER_MAX_EMAILS_PER_DAY=100
USER_MAX_ATTACHMENTS=3
USER_MAX_STORAGE_SIZE=104857600
USER_SESSION_TIMEOUT=1800000

# 组织管理
ORGANIZATION_MAX_USERS=10
ORGANIZATION_MAX_DOMAINS=2
ORGANIZATION_CUSTOM_BRANDING=true

# 高级功能
EMAIL_ENCRYPTION_ENABLED=false
EMAIL_DIGITAL_SIGNATURE=false
EMAIL_TEMPLATES_ENABLED=true
EMAIL_AUTO_REPLY=true
EMAIL_FORWARDING=true
EMAIL_VACATION_MODE=true

# 搜索和索引 (开发环境简化)
SEARCH_ENABLED=false
SEARCH_TYPE=memory
SEARCH_INDEX=./data/search_index

# ===========================================
# 通知配置
# ===========================================
# 系统通知
SYSTEM_NOTIFICATION_EMAIL=dev@0379.love
SYSTEM_NOTIFICATION_WEBHOOK=

# 开发者通知
DEV_NOTIFICATION_EMAIL=developer@0379.love
DEV_ERROR_NOTIFICATIONS=true
DEV_QUEUE_STATUS_NOTIFICATIONS=true

# ===========================================
# 集成配置
# ===========================================
# 第三方服务 (开发环境)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
MICROSOFT_CLIENT_ID=
MICROSOFT_CLIENT_SECRET=

# Webhook 配置
WEBHOOK_SECRET=dev_webhook_secret
WEBHOOK_RETRY_ATTEMPTS=1
WEBHOOK_TIMEOUT=5000

# API 集成
EXTERNAL_API_TIMEOUT=10000
EXTERNAL_API_RETRY_ATTEMPTS=1
EXTERNAL_API_BACKOFF=fixed

# ===========================================
# 备份和恢复
# ===========================================
# 开发环境备份
BACKUP_ENABLED=false
BACKUP_PATH=./backups/dev
BACKUP_RETENTION_DAYS=7

# 开发数据重置
DEV_DATA_RESET_ENABLED=true
DEV_DATA_RESET_SCHEDULE=daily
DEV_SAMPLE_DATA=true

# ===========================================
# 性能调优
# ===========================================
# 数据库优化 (开发环境关闭)
DB_CONNECTION_POOLING=false
DB_QUERY_CACHE=false
DB_INDEX_OPTIMIZATION=false
DB_PARTITIONING=false

# 缓存优化
REDIS_CLUSTERING=false
REDIS_PERSISTENCE=false
REDIS_MEMORY_LIMIT=134217728

# 应用优化
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=3
MINIFICATION_ENABLED=false
BUNDLING_ENABLED=false

# ===========================================
# 开发和调试
# ===========================================
# 调试配置
DEBUG=true
DEBUG_MAIL=true
DEBUG_DB=true
DEBUG_QUEUE=true
DEBUG_HTTP=true

# 测试配置
TEST_MODE=true
TEST_EMAIL_DOMAIN=test.0379.love
TEST_SMTP_BYPASS=true
TEST_AUTO_LOGIN=true

# 开发工具
HOT_RELOAD=true
AUTO_RESTART=true
LIVERELOAD_PORT=35729
DEVTOOLS_PORT=9229

# ===========================================
# 开发数据
# ===========================================
# 示例数据
DEV_SAMPLE_USERS=true
DEV_SAMPLE_EMAILS=true
DEV_SAMPLE_TEMPLATES=true
DEV_SAMPLE_ORGANIZATIONS=true

# 数据种子
DEV_SEED_DATA=true
DEV_SEED_ADMIN_EMAIL=admin@0379.love
DEV_SEED_ADMIN_PASSWORD=admin123
DEV_SEED_TEST_USER=test@0379.love
DEV_SEED_TEST_PASSWORD=test123

# ===========================================
# 开发服务器配置
# ===========================================
# 开发服务器
DEV_SERVER_HOST=localhost
DEV_SERVER_PORT=4000
DEV_SERVER_LIVERELOAD=true
DEV_SERVER_OPEN_BROWSER=true

# HTTPS (开发环境)
DEV_HTTPS_ENABLED=false
DEV_HTTPS_CERT=
DEV_HTTPS_KEY=

# ===========================================
# 开发工具集成
# ===========================================
# ESLint
ESLINT_ENABLED=true
ESLINT_AUTO_FIX=true

# Prettier
PRETTIER_ENABLED=true
PRETTIER_AUTO_FORMAT=true

# Type Checking
TYPE_CHECKING_ENABLED=true
STRICT_TYPE_CHECKING=false

# ===========================================
# 测试配置
# ===========================================
# 单元测试
UNIT_TEST_ENABLED=true
UNIT_TEST_WATCH=true
UNIT_TEST_COVERAGE=true

# 集成测试
INTEGRATION_TEST_ENABLED=true
INTEGRATION_TEST_DB_MEMORY=true

# E2E 测试
E2E_TEST_ENABLED=false
E2E_TEST_HEADLESS=true

# ===========================================
# 开发环境特定
# ===========================================
# 错误处理
DETAILED_ERROR_STACK=true
ERROR_NOTIFICATIONS=false
ERROR_SCREEN_DISPLAY=true

# 安全设置
HELMET_ENABLED=false
CORS_STRICT=false
RATE_LIMITING_STRICT=false

# 性能监控
PERFORMANCE_PROFILING=false
MEMORY_MONITORING=false
CPU_MONITORING=false

# ===========================================
# 快速开发功能
# ===========================================
# 快速登录
QUICK_LOGIN_ENABLED=true
QUICK_LOGIN_TOKEN=dev_quick_token

# 开发者工具面板
DEV_PANEL_ENABLED=true
DEV_PANEL_PATH=/dev-panel
DEV_PANEL_PASSWORD=dev123

# 数据库浏览器
DB_BROWSER_ENABLED=true
DB_BROWSER_PATH=/db-browser

# 邮件预览
EMAIL_PREVIEW_ENABLED=true
EMAIL_PREVIEW_PATH=/email-preview

# ===========================================
# 最终开发配置说明
# ===========================================
# 开发环境特点:
# 1. 使用 SQLite 数据库，无需额外安装
# 2. 内存队列，快速重启
# 3. 宽松的安全设置
# 4. 详细的日志输出
# 5. 自动生成示例数据
# 6. 开发者友好的工具

# 开发命令:
# bun run dev          - 启动开发服务器
# bun run test         - 运行测试
# bun run build        - 构建项目
# bun run seed         - 生成示例数据
# bun run reset        - 重置开发数据

# 开发端口:
# - 主服务: http://localhost:4000
# - API: http://localhost:4000/api
# - 开发面板: http://localhost:4000/dev-panel
# - 邮件预览: http://localhost:4000/email-preview