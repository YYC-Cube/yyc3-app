# ============================== 开发环境专属配置 ==============================
# 防误迁移警告：禁止复制到生产环境！
# 开发环境特征：192.168.3.0/24网段、无密码、允许NAS+多开发机访问（Git用户：yanyu，Docker用户：yanyuit）
# dev_environment_only: true

# 引入通用基础配置（容器内路径）
include /etc/redis/redis-base.conf

# 网络：开发环境允许本机与局域网
# 为避免容器内已有进程占用6379（某些镜像或预载模块），开发环境改用6380
port 6380
bind 0.0.0.0
protected-mode no

# 安全：禁用危险命令
rename-command FLUSHALL ""
rename-command FLUSHDB ""
rename-command KEYS "dev_secret_keys"

# 持久化：适配NAS存储
save 300 10
save 60 100
appendonly yes
appendfilename "appendonly-dev.aof"
appendfsync everysec
# RDB 文件
dbfilename dump-dev.rdb
# NAS数据存储路径（容器挂载点）
dir /data

# 内存：开发环境分配8GB
maxmemory 8gb
maxmemory-policy allkeys-lru
lazyfree-lazy-eviction yes
lazyfree-lazy-expire yes
lazyfree-lazy-server-del yes

# 数据库：32个库
databases 32