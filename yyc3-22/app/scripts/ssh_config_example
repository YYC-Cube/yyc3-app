# ~/.ssh/config - SSHé…ç½®æ–‡ä»¶ç¤ºä¾‹
# é€‚ç”¨äºå¤šè®¾å¤‡ã€å¤šè´¦å·é˜¿é‡Œäº‘æœåŠ¡å™¨å’ŒDocker/GitHubè”åŠ¨

# ========================= å…¨å±€é…ç½® =========================
Host *
    # è¿æ¥ä¼˜åŒ–
    ServerAliveInterval 60        # ä¿æŒè¿æ¥æ´»è·ƒï¼Œæ¯60ç§’å‘é€ä¸€æ¬¡å¿ƒè·³åŒ…
    ServerAliveCountMax 3         # å¤±è´¥3æ¬¡åæ–­å¼€è¿æ¥
    ConnectTimeout 10             # è¿æ¥è¶…æ—¶æ—¶é—´10ç§’
    Compression yes               # å¯ç”¨å‹ç¼©ï¼ŒåŠ é€Ÿä¼ è¾“
    TCPKeepAlive yes              # ä¿æŒTCPè¿æ¥
    
    # å®‰å…¨è®¾ç½®
    StrictHostKeyChecking yes     # ä¸¥æ ¼ä¸»æœºå¯†é’¥æ£€æŸ¥
    UserKnownHostsFile ~/.ssh/known_hosts
    IdentitiesOnly yes            # åªä½¿ç”¨æŒ‡å®šçš„ç§é’¥ï¼Œé˜²æ­¢èº«ä»½éªŒè¯é—®é¢˜
    
    # æ€§èƒ½ä¼˜åŒ–
    ControlMaster auto            # å¤ç”¨SSHè¿æ¥
    ControlPath ~/.ssh/control:%h:%p:%r
    ControlPersist 10m            # è¿æ¥ä¿æŒ10åˆ†é’Ÿ

# ========================= ç¯å¢ƒåˆ†ç»„ =========================

# æœ¬åœ°å±€åŸŸç½‘è®¾å¤‡
Host local-*
    IdentityFile ~/.ssh/id_rsa_local
    
# é˜¿é‡Œäº‘æœåŠ¡å™¨åˆ†ç»„
Host aliyun-*
    User root
    Port 22
    IdentityFile ~/.ssh/id_rsa_aliyun
    ForwardAgent yes              # è½¬å‘SSHä»£ç†ï¼Œä¾¿äºåœ¨æœåŠ¡å™¨ä¸Šè®¿é—®GitHub

# å¼€å‘ç¯å¢ƒæœåŠ¡å™¨
Host dev-*
    User yanyu
    IdentityFile ~/.ssh/id_rsa_dev

# ç”Ÿäº§ç¯å¢ƒæœåŠ¡å™¨
Host prod-*
    User root
    IdentityFile ~/.ssh/id_rsa_prod
    LogLevel ERROR                # ç”Ÿäº§ç¯å¢ƒå‡å°‘æ—¥å¿—è¾“å‡º

# ========================= æœ¬åœ°è®¾å¤‡ =========================

# MacBook Pro M4 Max - æœ¬åœ°å¼€å‘æœº
Host local-macbook-m4max
    HostName 192.168.3.22
    User yyc3-22
    IdentityFile ~/.ssh/id_rsa_local
    
# Apple M4 - æœ¬åœ°å¼€å‘æœº
Host local-imac-m4
    HostName 192.168.3.77
    User yyc3-77
    IdentityFile ~/.ssh/id_rsa_local
    
# Huawei MateBook X Pro
Host local-huawei
    HostName 192.168.3.66
    User administrator
    IdentityFile ~/.ssh/id_rsa_local
    
# NASæœåŠ¡å™¨ - é“å¨é©¬F4-423
# ç³»ç»Ÿç®¡ç†å‘˜ï¼šYYC
# ä¸»æœºåç§°ï¼šyyc3-45
Host local-nas
    HostName 192.168.3.45
    User YYC
    IdentityFile ~/.ssh/id_rsa_local
    Port 57                       # NASä½¿ç”¨éæ ‡å‡†SSHç«¯å£

# ========================= é˜¿é‡Œäº‘æœåŠ¡å™¨ =========================

# é˜¿é‡Œäº‘ECS - ååŒ—2 - Alibaba Cloud Linux 3.2104 LTS
Host aliyun-ecs-33
HostName 8.152.195.33
User root
Port 22
IdentityFile ~/.ssh/id_rsa_aliyun
ForwardAgent yes

# é˜¿é‡Œäº‘ECS - ååŒ—6 - Ubuntu 22.04
Host aliyun-ecs-121
HostName 8.152.195.33
User root
Port 22
IdentityFile ~/.ssh/id_rsa_aliyun
ForwardAgent yes

# ========================= GitHub é…ç½® =========================

# GitHub ä¸»ä»“ - YYC-Cube
Host github.com-cube
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa_github_cube

# GitHub å‰¯ä»“ - YY-Neuxs
Host github.com-neuxs
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa_github_neuxs

# ========================= Docker è¿œç¨‹è®¿é—® =========================

# Docker è¿œç¨‹æ“ä½œ
Host docker-remote
    HostName localhost
    Port 2375
    User yanyuit
    IdentityFile ~/.ssh/id_rsa_docker

# ========================= å¿«æ·è®¿é—®é…ç½® =========================

# å¿«æ·è®¿é—®åˆ«å - yyc3-IPå°¾æ•°æ ¼å¼
# æœ¬åœ°MacBook (IP: 192.168.3.22)
Host yyc3-22
    HostName 192.168.3.22
    User yyc3-22
    IdentityFile ~/.ssh/id_rsa_local

# é˜¿é‡Œäº‘æœåŠ¡å™¨ECS-121 (IP: 8.152.195.33)
Host yyc3-121
    HostName 8.152.195.33
    User root
    IdentityFile ~/.ssh/id_rsa_aliyun
    ForwardAgent yes

# é˜¿é‡Œäº‘æœåŠ¡å™¨ECS-33 (IP: 8.152.195.33)
Host yyc3-33
    HostName 8.152.195.33
    User root
    IdentityFile ~/.ssh/id_rsa_aliyun
    ForwardAgent yes

# Apple M4 - æœ¬åœ°å¼€å‘æœº (IP: 192.168.3.77)
Host yyc3-77
    HostName 192.168.3.77
    User yyc3-77
    IdentityFile ~/.ssh/id_rsa_local

# NASæœåŠ¡å™¨ - é“å¨é©¬F4-423 (IP: 192.168.3.45)
Host yyc3-45
    HostName 192.168.3.45
    User YYC
    Port 57
    IdentityFile ~/.ssh/id_rsa_local

# å…¶ä»–å¿«æ·è®¿é—®åˆ«å
Host ecs-33
    HostName 8.152.195.33
    User root
    IdentityFile ~/.ssh/id_rsa_aliyun

Host ecs-121
    HostName 8.152.195.33
    User root
    IdentityFile ~/.ssh/id_rsa_aliyun

Host mac
    HostName 192.168.3.22
    User yyc3-22
    IdentityFile ~/.ssh/id_rsa_local

# ç³»ç»Ÿç®¡ç†å‘˜ï¼šYYC
# ä¸»æœºåç§°ï¼šyyc3-45
Host nas
    HostName 192.168.3.45
    User YYC
    Port 57
    IdentityFile ~/.ssh/id_rsa_local

# ========================= ä½¿ç”¨è¯´æ˜ =========================
# 1. å°†æ­¤æ–‡ä»¶ä¿å­˜ä¸º ~/.ssh/config
# 2. è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™: chmod 600 ~/.ssh/config
# 3. ç¡®ä¿æ‰€æœ‰å¯†é’¥æ–‡ä»¶ä¹Ÿæœ‰æ­£ç¡®æƒé™: chmod 600 ~/.ssh/id_rsa_*
# 4. è¿æ¥ç¤ºä¾‹ - yyc3-IPå°¾æ•°æ ¼å¼ï¼ˆæ¨èï¼‰ï¼š
#    - è¿æ¥æœ¬åœ°MacBook: ssh yyc3-22    # IP: 192.168.3.22
#    - è¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨: ssh yyc3-121  # IP: 8.152.195.33
#    - è¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨: ssh yyc3-33   # IP: 8.152.195.33
#    - è¿æ¥æœ¬åœ°iMac: ssh yyc3-77       # IP: 192.168.3.77
#    - è¿æ¥NASæœåŠ¡å™¨: ssh yyc3-45      # IP: 192.168.3.45
# 5. å…¶ä»–è¿æ¥æ–¹å¼ï¼ˆä¿æŒå…¼å®¹ï¼‰ï¼š
#    - è¿æ¥æœ¬åœ°MacBook: ssh local-macbook-m4max æˆ– ssh mac
#    - è¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨: ssh aliyun-ecs-33 æˆ– ssh ecs-33
#    - è¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨: ssh aliyun-ecs-121 æˆ– ssh ecs-121
#    - è¿æ¥GitHubä¸»ä»“: git clone git@github.com-cube:YYC-Cube/repo.git
#    - è¿æ¥GitHubå‰¯ä»“: git clone git@github.com-neuxs:YY-Neuxs/repo.git
#
# 5. Dockerè”åŠ¨ç¤ºä¾‹ï¼š
#    - è®¾ç½®ç¯å¢ƒå˜é‡: export DOCKER_HOST=ssh://docker-remote
#    - ç„¶åæ­£å¸¸ä½¿ç”¨Dockerå‘½ä»¤: docker ps
#
# 6. ä¸ºä¸åŒæœåŠ¡å™¨åˆ›å»ºä¸åŒçš„å¯†é’¥ï¼š
#    - ssh-keygen -t ed25519 -f ~/.ssh/id_rsa_aliyun -C "aliyun-ecs"
#    - å°†å…¬é’¥æ·»åŠ åˆ°æœåŠ¡å™¨: ssh-copy-id -i ~/.ssh/id_rsa_aliyun.pub root@8.152.195.33
#
# å®‰å…¨å»ºè®®ï¼š
# - ä½¿ç”¨ä¸åŒçš„å¯†é’¥å¯¹ç®¡ç†ä¸åŒç¯å¢ƒçš„æœåŠ¡å™¨
# - å®šæœŸæ›´æ–°SSHå¯†é’¥ï¼ˆå»ºè®®æ¯3-6ä¸ªæœˆæ›´æ¢ä¸€æ¬¡ï¼‰
# - ç”Ÿäº§ç¯å¢ƒè€ƒè™‘ä¿®æ”¹é»˜è®¤SSHç«¯å£
# - é…ç½®é˜²ç«å¢™åªå…è®¸ç‰¹å®šIPè®¿é—®SSHç«¯å£
# - å¯ç”¨å¯†é’¥è®¤è¯ï¼Œç¦ç”¨å¯†ç ç™»å½•
# - è€ƒè™‘ä½¿ç”¨SSHè¯ä¹¦è®¤è¯æ›¿ä»£ä¼ ç»Ÿå¯†é’¥å¯¹
#
# æ³¨æ„ï¼šæ­¤é…ç½®æ–‡ä»¶åŸºäºå®é™…è®¾å¤‡ä¿¡æ¯ç”Ÿæˆï¼Œè¯·æ ¹æ®å®é™…ç¯å¢ƒéœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ ğŸŒ¹