# 对话历史

> 查询智能体对话历史，现仅支持 `slides_glm_agent` 智能体

## OpenAPI

````yaml openapi/openapi.json post /v1/agents/conversation
paths:
  path: /v1/agents/conversation
  method: post
  servers:
    - url: https://open.bigmodel.cn/api/
      description: 开放平台服务
  request:
    security:
      - title: bearerAuth
        parameters:
          query: {}
          header:
            Authorization:
              type: http
              scheme: bearer
              description: >-
                使用以下格式进行身份验证：Bearer [<your api
                key>](https://bigmodel.cn/usercenter/proj-mgmt/apikeys)
          cookie: {}
    parameters:
      path: {}
      query: {}
      header: {}
      cookie: {}
    body:
      application/json:
        schemaArray:
          - type: object
            properties:
              agent_id:
                allOf:
                  - type: string
                    description: 智能体 `ID`
              conversation_id:
                allOf:
                  - type: string
                    description: 对话 `ID`
              custom_variables:
                allOf:
                  - type: object
                    description: 自定义参数
                    properties:
                      include_pdf:
                        type: boolean
                        description: 是否导出 `pdf` 文件
                      pages:
                        type: array
                        description: '`Slide` 页信息'
                        items:
                          type: object
                          properties:
                            position:
                              type: number
                              description: '`Slide` 页码'
                            width:
                              type: number
                              description: '`Slide` 宽度, 单位: `cm`'
                            height:
                              type: number
                              description: '`Slide` 高度, 单位: `cm`'
            required: true
            refIdentifier: '#/components/schemas/GlmSlideAgentConversationRequest'
        examples:
          example:
            value:
              agent_id: <string>
              conversation_id: <string>
              custom_variables:
                include_pdf: true
                pages:
                  - position: 123
                    width: 123
                    height: 123
  response:
    '200':
      application/json:
        schemaArray:
          - type: object
            properties:
              conversation_id:
                allOf:
                  - type: string
                    description: 对话 `ID`
              agent_id:
                allOf:
                  - type: string
                    description: 智能体 `ID`
              choices:
                allOf:
                  - type: array
                    description: Agent output.
                    items:
                      type: object
                      properties:
                        message:
                          type: array
                          items:
                            type: object
                            properties:
                              role:
                                type: string
                                description: 智能体的角色 `role = assistant`
                              content:
                                type: array
                                description: 智能体响应内容
                                items:
                                  type: object
                                  properties:
                                    type:
                                      type: string
                                      description: >-
                                        响应内容类型：文件下载链接-`file_url`、图片下载链接-`image_url`
                                    tag_cn:
                                      type: string
                                      description: CN Tag.
                                    tag_en:
                                      type: string
                                      description: EN Tag.
                                    file_url:
                                      type: string
                                      description: 如果 `type = file_url`，则这个字段给出文件的具体下载链接
                                    image_url:
                                      type: string
                                      description: 如果 `type = image_url`，则这个字段给出图片的具体下载链接
              error:
                allOf:
                  - type: object
                    properties:
                      code:
                        type: string
                        description: Error code.
                      message:
                        type: string
                        description: Error message.
            refIdentifier: '#/components/schemas/GlmSlideAgentConversationResponse'
        examples:
          example:
            value:
              conversation_id: <string>
              agent_id: <string>
              choices:
                - message:
                    - role: <string>
                      content:
                        - type: <string>
                          tag_cn: <string>
                          tag_en: <string>
                          file_url: <string>
                          image_url: <string>
              error:
                code: <string>
                message: <string>
        description: 处理成功
    default:
      application/json:
        schemaArray:
          - type: object
            properties:
              error:
                allOf:
                  - required:
                      - code
                      - message
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
            refIdentifier: '#/components/schemas/Error'
        examples:
          example:
            value:
              error:
                code: <string>
                message: <string>
        description: 请求失败
  deprecated: false
  type: path
components:
  schemas: {}

````