# 内容安全

> 可对文本、图片、音频、视频格式类型的内容进行检测，精准识别涉黄、涉暴、违法违规等风险内容，并输出结构化审核结果（包括内容类型、风险类型及具体风险内容片段），快速定位和处理违规信息。

## OpenAPI

````yaml openapi/openapi.json post /paas/v4/moderations
paths:
  path: /paas/v4/moderations
  method: post
  servers:
    - url: https://open.bigmodel.cn/api/
      description: 开放平台服务
  request:
    security:
      - title: bearerAuth
        parameters:
          query: {}
          header:
            Authorization:
              type: http
              scheme: bearer
              description: >-
                使用以下格式进行身份验证：Bearer [<your api
                key>](https://bigmodel.cn/usercenter/proj-mgmt/apikeys)
          cookie: {}
    parameters:
      path: {}
      query: {}
      header: {}
      cookie: {}
    body:
      application/json:
        schemaArray:
          - type: object
            properties:
              model:
                allOf:
                  - type: string
                    description: 安全模型
                    enum:
                      - moderation
                    default: moderation
              input:
                allOf:
                  - description: |-
                      需要审核的内容
                       纯文本字符串（最大输入长度：`2000` 字符）
                      多媒体对象(`type+url`)
                       图片：图片小于 `10M`，最低分辨率 `20* 20`，不超过 `6000 * 6000`
                      视频：推荐视频时长 `30` 秒
                      音频：推荐音频时长 `60` 秒
                    oneOf:
                      - type: string
                        description: 需要审核的文本内容
                        example: 审核内容安全样例字符串。
                      - type: object
                        description: 单个多模态审核内容
                        properties:
                          type:
                            type: string
                            description: 内容类型，可以是文本、视频链接、音频链接或图片链接
                            enum:
                              - text
                              - image_url
                              - video_url
                              - audio_url
                          text:
                            type: string
                            description: 当 `type` 为 `text` 时的文本内容
                            example: 待审核内容
                          image_url:
                            type: object
                            description: 当 `type` 为 `image_url` 时的图片参数
                            properties:
                              url:
                                type: string
                                description: 当 `type` 为 `image_url` 时的图片链接地址
                          video_url:
                            type: object
                            description: 当 `type` 为 `video_url` 时的视频参数
                            properties:
                              url:
                                type: string
                                description: 当 `type` 为 `video_url` 时的视频链接地址
                          audio_url:
                            type: object
                            description: 当 `type` 为 `audio_url` 时的音频参数
                            properties:
                              url:
                                type: string
                                description: 当 `type` 为 `audio_url` 时的音频链接地址
                        required:
                          - type
                      - type: array
                        description: 审核多模态内容数组，支持文本、文件和图片
                        items:
                          type: object
                          properties:
                            type:
                              type: string
                              description: 内容类型，可以是文本、视频链接、音频链接或图片链接
                              enum:
                                - text
                                - image_url
                                - video_url
                                - audio_url
                            text:
                              type: string
                              description: 当 `type` 为 `text` 时的文本内容
                              example: 待审核内容
                            image_url:
                              type: object
                              description: 当 `type` 为 `image_url` 时的图片参数
                              properties:
                                url:
                                  type: string
                                  description: 当 `type` 为 `image_url` 时的图片链接地址
                            video_url:
                              type: object
                              description: 当 `type` 为 `video_url` 时的视频参数
                              properties:
                                url:
                                  type: string
                                  description: 当 `type` 为 `video_url` 时的视频链接地址
                            audio_url:
                              type: object
                              description: 当 `type` 为 `audio_url` 时的音频参数
                              properties:
                                url:
                                  type: string
                                  description: 当 `type` 为 `audio_url` 时的音频链接地址
            required: true
            refIdentifier: '#/components/schemas/ModerationRequest'
            requiredProperties:
              - model
              - input
        examples:
          example:
            value:
              model: moderation
              input: 审核内容安全样例字符串。
  response:
    '200':
      application/json:
        schemaArray:
          - type: object
            properties:
              id:
                allOf:
                  - type: string
                    description: 任务 `ID`
              created:
                allOf:
                  - type: integer
                    description: 请求创建时间，是以秒为单位的 `Unix` 时间戳
              request_id:
                allOf:
                  - type: string
                    description: 请求标识符
              result_list:
                allOf:
                  - type: array
                    items:
                      type: object
                      properties:
                        content_type:
                          description: 内容类型
                          type: string
                        risk_level:
                          type: string
                          description: 风险判定结果`PASS`：正常内容`REVIEW`：可疑内容`REJECT`：违规内容
                        risk_type:
                          type: array
                          description: 风险类型列表
                          items:
                            type: string
              usage:
                allOf:
                  - type: object
                    properties:
                      moderation_text:
                        type: object
                        properties:
                          call_count:
                            type: number
            refIdentifier: '#/components/schemas/ModerationResponse'
        examples:
          example:
            value:
              id: <string>
              created: 123
              request_id: <string>
              result_list:
                - content_type: <string>
                  risk_level: <string>
                  risk_type:
                    - <string>
              usage:
                moderation_text:
                  call_count: 123
        description: 业务处理成功
    default:
      application/json:
        schemaArray:
          - type: object
            properties:
              error:
                allOf:
                  - required:
                      - code
                      - message
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
            refIdentifier: '#/components/schemas/Error'
        examples:
          example:
            value:
              error:
                code: <string>
                message: <string>
        description: 请求失败。
  deprecated: false
  type: path
components:
  schemas: {}

````